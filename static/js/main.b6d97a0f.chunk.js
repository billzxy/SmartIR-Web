(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(27).concat([function(t){t.exports=[{id:"20190724143458",filename:"pano-20190724143458-mx.png",coord:{lat:42.36000896,lng:-71.05425626},calibration:2.1959999999999638,neighborhood:"quincy"},{id:"20190724143833",filename:"pano-20190724143833-mx.png",coord:{lat:42.36000888,lng:-71.05416259},calibration:2.6039999999999637,neighborhood:"quincy"},{id:"20190724145944",filename:"pano-20190724145944-mx.png",coord:{lat:42.36014171,lng:-71.0525956},calibration:-2.368000000000113,neighborhood:"atlave"},{id:"20190724151238",filename:"pano-20190724151238-mx.png",coord:{lat:42.35946,lng:-71.05190878},calibration:-2.872000000000005,neighborhood:"atlave"},{id:"20190724151553",filename:"pano-20190724151553-mx.png",coord:{lat:42.35901057,lng:-71.05173236},calibration:-.5760000000000074,neighborhood:"atlave"},{id:"20190724150711",filename:"pano-20190724150711-mx.png",coord:{lat:42.35976055,lng:-71.05235965},calibration:-1.352814692820381,neighborhood:"atlave"},{id:"20190925112226",filename:"pano-20190925112226-mx.png",calibration:-2.9,neighborhood:["caa","cab"],coord:{lat:42.45954294,lng:-71.35375977}},{id:"20190925112242",filename:"pano-20190925112242-mx.png",calibration:-2.252,neighborhood:"cab",coord:{lat:42.45956467,lng:-71.35345682}},{id:"20190925113249",filename:"pano-20190925113249-mx.png",calibration:-2.98,neighborhood:"caa",coord:{lat:42.45957315,lng:-71.35418699}},{id:"20190925112410",filename:"pano-20190925112410-mx.png",calibration:-2.444,neighborhood:"caa",coord:{lat:42.45966985,lng:-71.35391209}},{id:"20190925111418",filename:"pano-20190925111418-mx.png",calibration:-2.82,neighborhood:"cdt",coord:{lat:42.45969867,lng:-71.35140942}},{id:"20190925112757",filename:"pano-20190925112757-mx.png",calibration:-2.17,neighborhood:"caa",coord:{lat:42.45996776,lng:-71.35447809}},{id:"20190925110216",filename:"pano-20190925110216-mx.png",calibration:-1.7,neighborhood:"cdt",coord:{lat:42.45950405,lng:-71.35144528}},{id:"20190925112004",filename:"pano-20190925112004-mx.png",calibration:-2.91,neighborhood:"cab",coord:{lat:42.45927407,lng:-71.35335518}},{id:"20190925113346",filename:"pano-20190925113346-mx.png",calibration:-2.14,neighborhood:"caa",coord:{lat:42.45954963,lng:-71.354371}},{id:"20190925110449",filename:"pano-20190925110449-mx.png",calibration:-1.35,neighborhood:"cdt",coord:{lat:42.45962005,lng:-71.35099675}},{id:"20190925112944",filename:"pano-20190925112944-mx.png",calibration:-2.15,neighborhood:"caa",coord:{lat:42.45980487,lng:-71.35493824}},{id:"20190925111251",filename:"pano-20190925111251-mx.png",calibration:-1.82,neighborhood:"cdt",coord:{lat:42.45976744,lng:-71.35109601}},{id:"20190925111017",filename:"pano-20190925111017-mx.png",calibration:-3.38,neighborhood:"cdt",coord:{lat:42.45994194,lng:-71.35046685}},{id:"20190925112929",filename:"pano-20190925112929-mx.png",calibration:-2.77,neighborhood:"caa",coord:{lat:42.45967437,lng:-71.35489279}},{id:"20190925110659",filename:"pano-20190925110659-mx.png",calibration:-2.86,neighborhood:"cdt",coord:{lat:42.45980818,lng:-71.35042955}},{id:"20190925112754",filename:"pano-20190925112754-mx.png",calibration:-3.01,neighborhood:"caa",coord:{lat:42.4598957,lng:-71.35475797}},{id:"20190925112418",filename:"pano-20190925112418-mx.png",calibration:-2.94,neighborhood:"caa",coord:{lat:42.45977151,lng:-71.35404583}},{id:"20190925111907",filename:"pano-20190925111907-mx.png",calibration:2.82,neighborhood:"cab",coord:{lat:42.4594054,lng:-71.35342462}},{id:"20190925111628",filename:"pano-20190925111628-mx.png",calibration:-3.05,neighborhood:"cdt",coord:{lat:42.45958235,lng:-71.35173774}},{id:"20190925113109",filename:"pano-20190925113109-mx.png",calibration:-2.95,neighborhood:"caa",coord:{lat:42.45951864,lng:-71.35461781}}]},,,,,,,,,,,,,,,,,,function(t){t.exports={quincy:{type:"linear",map:["20190724143458","20190724143833"]},cdt:{type:"irregular",map:{20190925111628:["20190925111418","20190925110216"],20190925110216:["20190925111628","20190925111418","20190925110449"],20190925111418:["20190925111628","20190925110216","20190925111251"],20190925111251:["20190925111418","20190925110449","20190925111017"],20190925110449:["20190925110216","20190925111251","20190925110659"],20190925110659:["20190925110449","20190925111017"],20190925111017:["20190925110659","20190925111251"]}},caa:{type:"circular",map:["20190925112410","20190925112226","20190925113249","20190925113346","20190925113109","20190925112929","20190925112944","20190925112754","20190925112757","20190925112418"]},cab:{type:"linear",map:["20190925112226","20190925112242","20190925111907","20190925112004"]},atlave:{type:"linear",map:["20190724151553","20190724151238","20190724150711","20190724145944"]}}},,,,,,,,,,,,,,function(t,e,n){var a={"./pano-20190724143458-mx.png":112,"./pano-20190724143833-mx.png":113,"./pano-20190724145944-mx.png":114,"./pano-20190724150711-mx.png":115,"./pano-20190724151238-mx.png":116,"./pano-20190724151553-mx.png":117,"./pano-20190925110216-mx.png":118,"./pano-20190925110449-mx.png":119,"./pano-20190925110659-mx.png":120,"./pano-20190925111017-mx.png":121,"./pano-20190925111251-mx.png":122,"./pano-20190925111418-mx.png":123,"./pano-20190925111628-mx.png":124,"./pano-20190925111907-mx.png":125,"./pano-20190925112004-mx.png":126,"./pano-20190925112226-mx.png":127,"./pano-20190925112242-mx.png":128,"./pano-20190925112410-mx.png":129,"./pano-20190925112418-mx.png":130,"./pano-20190925112754-mx.png":131,"./pano-20190925112757-mx.png":132,"./pano-20190925112929-mx.png":133,"./pano-20190925112944-mx.png":134,"./pano-20190925113109-mx.png":135,"./pano-20190925113249-mx.png":136,"./pano-20190925113346-mx.png":137};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=r,t.exports=o,o.id=59},,,,,,,,,function(t,e,n){t.exports=n(141)},,,,function(t,e,n){},,,,,,,,,,,,,,,,,,function(t,e,n){},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n.p+"static/media/pano-20190724143458-mx.072de3d6.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724143833-mx.0732614b.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724145944-mx.0c7531e1.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724150711-mx.f67813cf.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724151238-mx.3f9e7726.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724151553-mx.c1e8bceb.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925110216-mx.15966b2a.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925110449-mx.5b18415f.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925110659-mx.a9cd19bd.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111017-mx.d1eacec2.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111251-mx.3a2748ab.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111418-mx.80a5715d.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111628-mx.c890f6ed.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111907-mx.f5896ac6.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112004-mx.7f51a340.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112226-mx.a1e5bd11.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112242-mx.4589189c.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112410-mx.5e375cce.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112418-mx.f8ad88bb.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112754-mx.e2a0bfca.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112757-mx.702d7268.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112929-mx.dad914bf.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112944-mx.fdd79d67.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925113109-mx.1c1e94e1.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925113249-mx.798912fc.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925113346-mx.0775a445.png"},,,function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(24),i=n.n(r),c=(n(72),n(26)),l=n(17),s=n(15),p=n(16);function d(){var t=Object(s.a)(["\n\tflex: 1;\n\tpadding: 24px;\n\tpadding-top: ","px;\n"]);return d=function(){return t},t}function u(){var t=Object(s.a)(["\n\tposition: fixed;\n\tz-index: 999;\n\ttop: 0;\n\tpadding: ","px;\n\theight: calc(","px - ","px * 2);\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\tbackground-color: #f8f8f8;\n\twidth: 100%;\n\n\t& .ir-nav-item {\n\t\tmargin-right: 1rem;\n\t\ttext-decoration: none;\n\t\tcolor: rgba(0, 0, 0, 0.6);\n\t}\n\n\t& .ir-nav-item__active {\n\t\tcolor: #ea6c2f;\n\t}\n"]);return u=function(){return t},t}function m(){var t=Object(s.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return m=function(){return t},t}var h=p.a.div(m()),g=p.a.div(u(),12,64,12),f=p.a.div(d(),88),b=n(2),v=n.n(b),x=n(10),y=n(13),w=n(14),k=n(37),M=n(34),j=n(35),O=n(38),P=n(27),E=n(45);function I(t,e,n){if(!n)for(var a=0;a<t.length;a++){var o=[],r=!0,i=!1,c=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var p=l.value;o.push(t[a][p])}}catch(v){i=!0,c=v}finally{try{r||null==s.return||s.return()}finally{if(i)throw c}}return o}for(a=0;a<t.length;a++)if(t[a].id===n){if(0===e.length)return t[a];var d={},u=!0,m=!1,h=void 0;try{for(var g,f=e[Symbol.iterator]();!(u=(g=f.next()).done);u=!0){var b=g.value;d[b]=t[a][b]}}catch(v){m=!0,h=v}finally{try{u||null==f.return||f.return()}finally{if(m)throw h}}return d}}function L(t,e){if(Array.isArray(e)){var n=[],a=!0,o=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value,s=C(t,E[l]);Array.prototype.push.apply(n,s)}}catch(p){o=!0,r=p}finally{try{a||null==c.return||c.return()}finally{if(o)throw r}}return n}return C(t,E[e])}function C(t,e){if(e.map.length<2)return[];switch(e.type){case"linear":for(var n=0;n<e.map.length;n++)if(t===e.map[n])return 0===n?[e.map[1]]:n===e.map.length-1?[e.map[e.map.length-2]]:[e.map[n-1],e.map[n+1]];break;case"circular":for(n=0;n<e.map.length;n++)if(t===e.map[n])return 0===n?[e.map[1],e.map[e.map.length-1]]:n===e.map.length-1?[e.map[e.map.length-2],e.map[0]]:[e.map[n-1],e.map[n+1]];break;case"irregular":return e.map[t]}}var B={getPanoFileNameById:function(t){return Promise.resolve({data:{data:I(P,["filename"],t)}})},getPanoCoordById:function(t){return Promise.resolve({data:{data:I(P,["coord"],t)}})},getAllPanoIdAndCoord:function(){return Promise.resolve({data:{data:P}})},getPanoAllAttrById:function(t){return Promise.resolve({data:{data:I(P,[],t)}})},getNeighborsById:function(t,e){return Promise.resolve({data:{data:L(t,e)}})}};function A(){var t=Object(s.a)(["\n\twidth: 100%;\n\theight: 100%;\n\n\t& > div {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"]);return A=function(){return t},t}function N(){var t=Object(s.a)(["\n\twidth: 100% !important;\n\theight: 100% !important;\n\tposition: relative !important;\n"]);return N=function(){return t},t}var z=Object(p.a)(O.Map)(N()),T=p.a.div(A()),D=function(t){function e(t){var n;return Object(y.a)(this,e),(n=Object(k.a)(this,Object(M.a)(e).call(this,t))).bounds=new n.props.google.maps.LatLngBounds,n.state={showComp:!1},n}return Object(j.a)(e,t),Object(w.a)(e,[{key:"componentDidMount",value:function(){var t=this;(function(){var e=Object(x.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAllPanoIdAndCoord().then(function(e){for(var n=[],a=e.data.data,o=0;o<a.length;o++)n.push({id:a[o].id,lat:a[o].coord.lat,lng:a[o].coord.lng});t.setState({coords:n,showComp:!0})});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()}},{key:"showComponent",value:function(t){!0!==t&&!1!==t||this.setState({showComp:t})}},{key:"setBounds",value:function(){for(var t=0;t<this.state.coords.length;t++){var e=this.state.coords[t];this.bounds.extend(new this.props.google.maps.LatLng({lat:e.lat,lng:e.lng}))}}},{key:"addMarkers",value:function(){var t=this;return this.setBounds(),this.state.coords.map(function(e,n){return o.a.createElement(O.Marker,{lid:e.id,position:{lat:e.lat,lng:e.lng},onClick:function(e){return t.showComponent(!1),t.gotoPano(e.lid)},key:e.id})})}},{key:"gotoPano",value:function(t){this.props.history.push("/viewPano/".concat(t))}},{key:"render",value:function(){return this.state.showComp?o.a.createElement(z,{ref:this.props.onMapMounted,google:this.props.google,zoom:18,initialCenter:{lat:42.4595,lng:-71.353},bounds:this.bounds},this.addMarkers()):null}}]),e}(a.Component),R=Object(O.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(Object(l.g)(D)),S=function(t){return o.a.createElement(T,null,o.a.createElement(R,t))},V=n(33),F=n(1),U=n(39),X=(n(90),n(48)),Y=function(){function t(e){var n=this;Object(y.a)(this,t),this.coord={lat:0,lng:0},this.calibration=0,this.id=void 0,this.fname="",this.neighborhood="",this.neighborArr=void 0,this.setAllAttr=Object(x.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getPanoAllAttrById(n.id).then(function(t){n.fname=t.data.data.filename,n.coord.lat=t.data.data.coord.lat,n.coord.lng=t.data.data.coord.lng,n.calibration=t.data.data.calibration,n.neighborhood=t.data.data.neighborhood});case 2:case"end":return t.stop()}},t)})),this.getNeighborIds=Object(x.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getNeighborsById(n.id,n.neighborhood).then(function(t){n.neighborArr=t.data.data});case 2:case"end":return t.stop()}},t)})),this.updateCalibration=function(){var t=Object(x.a)(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:({calibration:-e.rotation.y}),alert("Update Calibration is disabled at this moment!");case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.id=e}return Object(w.a)(t,[{key:"getDistanceTo",value:function(t){return X.getDistance(this.coord,t.coord)}},{key:"getDistanceToNeighbors",value:function(t){return t.map(this.getDistanceTo)}},{key:"getBearingTo",value:function(t){return X.getRhumbLineBearing(this.coord,t.coord)}},{key:"getBearingToNeighbors",value:function(t){return t.map(this.getBearingTo)}}]),t}(),_=function(){function t(){Object(y.a)(this,t),this.mesh=void 0,this.material=void 0,this.geometry=void 0,this.id=void 0,this.geometry=new F.ConeBufferGeometry(.2,1,16),this.material=new F.MeshBasicMaterial({color:"white"}),this.mesh=new F.Mesh(this.geometry,this.material)}return Object(w.a)(t,[{key:"onClickHandler",value:function(){}}]),t}();function G(){var t=Object(s.a)(["\n\t&,\n\t&:after {\n\t\tborder-radius: 50%;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t}\n\t& {\n\t\tmargin: 60px auto;\n\t\tfont-size: 10px;\n\t\tposition: relative;\n\t\ttext-indent: -9999em;\n\t\tborder-top: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-right: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-bottom: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-left: 1.1em solid ",";\n\t\t-webkit-transform: translateZ(0);\n\t\t-ms-transform: translateZ(0);\n\t\ttransform: translateZ(0);\n\t\t-webkit-animation: load8 1.1s infinite linear;\n\t\tanimation: load8 1.1s infinite linear;\n\t}\n\t@-webkit-keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t@keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"]);return G=function(){return t},t}var H=p.a.div(G(),function(t){var e=t.width;return void 0===e?"48":e},function(t){var e=t.width;return void 0===e?"48":e},function(t){var e=t.color;return void 0===e?"#ea6c2f":e}),W=n(111),q=function(t){function e(t){var n;return Object(y.a)(this,e),(n=Object(k.a)(this,Object(M.a)(e).call(this,t))).currLoc=void 0,n.neighbors=void 0,n.cylindergeometry=new F.CylinderBufferGeometry(20,20,15,100,1,!0),n.cylindermaterial=void 0,n.cylindermesh=void 0,n.texture=void 0,n.loader=new F.TextureLoader,n.lines=[],n.tempcylindergeometry=new F.CylinderBufferGeometry(21,21,15,100,1,!0),n.tempcylindermaterial=void 0,n.tempcylindermesh=void 0,n.state={isLoading:!0},n.RenderPano=n.RenderPano.bind(Object(V.a)(n)),n}return Object(j.a)(e,t),Object(w.a)(e,[{key:"componentDidMount",value:function(){var t=this;(function(){var e=Object(x.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.currLoc=new Y(t.panoId),e.next=3,t.currLoc.setAllAttr().then(function(){t.loadTexture()});case 3:t.neighbors=new Map,t.setNeighbors();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()}},{key:"setNeighbors",value:function(){var t=Object(x.a)(v.a.mark(function t(){var e,n,a,o,r,i,c,l=this;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.neighbors.clear(),t.next=3,this.currLoc.getNeighborIds();case 3:if(0!==(e=this.currLoc.neighborArr).length){t.next=9;break}return console.log("No neighbors discorvered..."),t.abrupt("return");case 9:n=!0,a=!1,o=void 0,t.prev=12,r=v.a.mark(function t(){var e,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.value,n=new Y(e),t.next=4,n.setAllAttr().then(function(){l.addNeighbor(n)});case 4:case"end":return t.stop()}},t)}),i=e[Symbol.iterator]();case 15:if(n=(c=i.next()).done){t.next=20;break}return t.delegateYield(r(),"t0",17);case 17:n=!0,t.next=15;break;case 20:t.next=26;break;case 22:t.prev=22,t.t1=t.catch(12),a=!0,o=t.t1;case 26:t.prev=26,t.prev=27,n||null==i.return||i.return();case 29:if(t.prev=29,!a){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(26);case 34:case"end":return t.stop()}},t,this,[[12,22,26,34],[27,,29,33]])}));return function(){return t.apply(this,arguments)}}()},{key:"addNeighbor",value:function(t){this.neighbors.set(t.id,{location:t,distance:this.currLoc.getDistanceTo(t),bearing:this.currLoc.getBearingTo(t)})}},{key:"loadTexture",value:function(){var t=this;this.texture=this.loader.load(n(59)("./".concat(this.currLoc.fname)),function(){t.setState({isLoading:!1})},void 0,function(t){console.error(t)}),this.cylindermaterial=new F.MeshBasicMaterial({map:this.texture,side:F.DoubleSide}),this.cylindermesh=new F.Mesh(this.cylindergeometry,this.cylindermaterial),this.cylindergeometry.scale(-1,1,1),this.cylindermesh.rotation.y=this.currLoc.calibration}},{key:"CameraLookNorth",value:function(t){var e={at:t.rotation.y},n=new W.Tween(e).to({at:0},750).easing(W.Easing.Quadratic.InOut);n.onUpdate(function(){t.rotation.y=e.at}),n.onComplete(function(){t.rotation.y=0}),n.start()}},{key:"RenderPano",value:function(){var t=this,e=Object(a.useRef)(),r=Object(U.c)(),i=r.gl,c=r.camera,l=r.canvas,s=r.scene;c.fov=40,i.setSize(l.clientWidth,l.clientHeight),c.position.set(0,0,0),c.lookAt(0,0,0);var p,d,u,m=new _,h=Object(a.useRef)(),g=Object(a.useRef)(),f=Object(a.useRef)(),b=!1,y=0;var w=0;function k(t){c.rotation.y+=t/1e3,c.rotation.y%=2*Math.PI}l.addEventListener("mousemove",function(t){return function(t){if(b){t.preventDefault();var e=t.clientX-y;t.clientY,y=t.clientX,t.clientY,k(e)}}(t)},!1),l.addEventListener("mousedown",function(t){return(e=t).preventDefault(),b=!0,y=e.clientX,void e.clientY;var e},!1),l.addEventListener("mouseup",function(t){return t.preventDefault(),void(b=!1)},!1),window.addEventListener("mousewheel",function(t){k(t.wheelDeltaY/3)},!1),l.addEventListener("touchmove",function(t){return function(t){var e=t.targetTouches[0].pageX-w;w=t.targetTouches[0].pageX,k(e)}(t)},!1),l.addEventListener("touchstart",function(t){w=t.targetTouches[0].pageX},!1),window.addEventListener("resize",function(){i.setSize(l.clientWidth,l.clientHeight),c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix()},!1);var M=function(e){var n=t.neighbors.get(e).bearing*Math.PI/180,a=-t.neighbors.get(e).bearing*Math.PI/180;c.rotation.y>0&&(a=2*Math.PI-t.neighbors.get(e).bearing*Math.PI/180),c.rotation.y-a>=Math.PI&&c.rotation.y-a<2*Math.PI?a+=2*Math.PI:c.rotation.y-a<=-Math.PI&&c.rotation.y-a<-2*Math.PI&&(a=-2*Math.PI+a);var o={at:c.rotation.y},r={at:a},i=new W.Tween(o).to(r,500).easing(W.Easing.Quadratic.InOut);i.onUpdate(function(){c.rotation.y=o.at}),i.onComplete(function(){c.rotation.y=-t.neighbors.get(e).bearing*Math.PI/180});var l={zVal:c.position.z,xVal:c.position.x,fovValue:c.fov,opacity:t.cylindermaterial.opacity},p={zVal:-17*Math.cos(n),xVal:17*Math.sin(n),fovValue:75,opacity:.1},d=new W.Tween(l).to(p,500);d.onUpdate(function(){c.position.z=l.zVal,c.position.x=l.xVal,c.fov=l.fovValue,c.updateProjectionMatrix(),t.cylindermaterial.opacity=l.opacity}),d.onComplete(Object(x.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.position.set(0,0,0),c.fov=40,c.updateProjectionMatrix(),t.cylindermaterial.map=t.texture,t.cylindermesh.rotation.y=t.currLoc.calibration,t.cylindermaterial.transparent=!1,t.cylindermaterial.opacity=1,s.remove(t.tempcylindermesh),t.tempcylindermesh.geometry.dispose(),t.tempcylindermesh.material.dispose(),t.tempcylindermesh=void 0,t.tempcylindergeometry.scale(-1,1,1),e.next=14,t.setNeighbors().then(O);case 14:case"end":return e.stop()}},e)}))),i.chain(d),t.cylindermaterial.transparent=!0,i.start()};s.add(this.cylindermesh);var j=function(){var e=Object(x.a)(v.a.mark(function e(a){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.currLoc=t.neighbors.get(a).location,t.texture=t.loader.load(n(59)("./".concat(t.currLoc.fname)),function(){t.tempcylindermaterial=new F.MeshBasicMaterial({map:t.texture,side:F.DoubleSide}),t.tempcylindermesh=new F.Mesh(t.tempcylindergeometry,t.tempcylindermaterial),t.tempcylindergeometry.scale(-1,1,1),t.tempcylindermesh.rotation.y=t.currLoc.calibration,s.add(t.tempcylindermesh),M(a)},void 0,function(t){console.error(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=t.neighbors.keys();p=t.neighbors.get(e.next().value);var n=h.current,a=g.current,o=f.current;console.log(t.currLoc.id),n.position.z=-Math.cos(p.bearing*Math.PI/180),n.position.x=Math.sin(p.bearing*Math.PI/180),n.rotation.x=-1.5708,n.rotation.z=-p.bearing*Math.PI/180,a.visible=!1,o.visible=!1,t.neighbors.size>1&&(d=t.neighbors.get(e.next().value),a.visible=!0,a.position.z=-Math.cos(d.bearing*Math.PI/180),a.position.x=Math.sin(d.bearing*Math.PI/180),a.rotation.x=-1.5708,a.rotation.z=-d.bearing*Math.PI/180),3===t.neighbors.size&&(u=t.neighbors.get(e.next().value),o.visible=!0,o.position.z=-Math.cos(u.bearing*Math.PI/180),o.position.x=Math.sin(u.bearing*Math.PI/180),o.rotation.x=-1.5708,o.rotation.z=-u.bearing*Math.PI/180)};h.current&&g.current&&f.current&&O();var P=Object(a.useRef)(),E=Object(a.useRef)(),I=Object(a.useRef)(),L=[new F.Vector3(0,1,0),new F.Vector3(-.6,-1,0),new F.Vector3(0,-.5,0),new F.Vector3(.6,-1,0)];function C(t,e){var n=!0,a=!1,o=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){r.value.material.opacity=e}}catch(c){a=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}}I.current&&(I.current.vertices=L,I.current.faces.push(new F.Face3(0,1,2)),I.current.faces.push(new F.Face3(0,2,3)),I.current.computeFaceNormals(),I.current.scale(.3,.3,.3));var B=Object(a.useRef)();return B.current&&B.current.geometry.scale(2,2,2),Object(U.b)(function(){W.update(),P.current.position.set(-13*Math.sin(c.rotation.y),-4,-13*Math.cos(c.rotation.y)),E.current.position.set(-13*Math.sin(c.rotation.y-.4),-3,-13*Math.cos(c.rotation.y-.4)),E.current.rotation.y=c.rotation.y,E.current.rotation.z=-c.rotation.y}),o.a.createElement(o.a.Fragment,null,o.a.createElement("perspectiveCamera",{ref:e,fov:45,aspect:window.innerWidth/window.innerHeight,onUpdate:function(t){return t.updateProjectionMatrix()}}),o.a.createElement("group",{ref:P},o.a.createElement("mesh",{onClick:function(){j(p.location.id)},onPointerOver:function(t){t.object.material.opacity=.7},onPointerOut:function(t){t.object.material.opacity=.5},ref:h,geometry:m.geometry},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),o.a.createElement("mesh",{onClick:function(){j(d.location.id)},onPointerOver:function(t){t.object.material.opacity=.7},onPointerOut:function(t){t.object.material.opacity=.5},ref:g,geometry:m.geometry},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),o.a.createElement("mesh",{onClick:function(){j(u.location.id)},onPointerOver:function(t){t.object.material.opacity=.7},onPointerOut:function(t){t.object.material.opacity=.5},ref:f,geometry:m.geometry},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0}))),o.a.createElement("group",{onClick:function(){return t.CameraLookNorth(c)},onPointerOver:function(t){C(t.object.children,.8)},onPointerOut:function(t){C(t.object.children,.5)},ref:E},o.a.createElement("mesh",{position:[0,0,0],geometry:new F.CircleGeometry(.4,100,0)},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),o.a.createElement("mesh",{position:[0,.03,.01]},o.a.createElement("geometry",{attach:"geometry",ref:I}),o.a.createElement("meshBasicMaterial",{attach:"material",color:"red",opacity:.5,transparent:!0}))))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement("div",{className:"spinner-container"},o.a.createElement(H,{width:100,height:100})):o.a.createElement("div",{className:"Pano-canvas"},o.a.createElement(U.a,null,o.a.createElement(this.RenderPano,null)))}},{key:"panoId",get:function(){return this.props.match.params.id||"20190724151553"}}]),e}(a.Component),J=Object(l.g)(q),Z=(n(140),[{path:"/maps",title:"Pano Maps"},{path:"/viewPano",title:"View Pano"}]);i.a.render(o.a.createElement(function(){return o.a.createElement(c.a,null,o.a.createElement(h,null,o.a.createElement(g,null,Z.map(function(t){return o.a.createElement(c.b,{to:t.path,key:t.path,activeClassName:"ir-nav-item__active",className:"ir-nav-item"},t.title)})),o.a.createElement(f,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"/maps",component:S}),o.a.createElement(l.b,{exact:!0,path:"/viewPano/:id",component:J}),o.a.createElement(l.b,{path:"/viewPano",component:J}),o.a.createElement(l.a,{exact:!0,from:"/",to:"maps"})))))},null),document.getElementById("interface"))}]),[[68,1,2]]]);
//# sourceMappingURL=main.b6d97a0f.chunk.js.map