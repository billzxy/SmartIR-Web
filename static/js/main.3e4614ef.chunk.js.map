{"version":3,"sources":["assets/viewPano/resource/pano-20190724143458-mx.png","assets/viewPano/resource/pano-20190724143833-mx.png","assets/viewPano/resource/pano-20190724145944-mx.png","assets/viewPano/resource/pano-20190724150711-mx.png","assets/viewPano/resource/pano-20190724151238-mx.png","assets/viewPano/resource/pano-20190724151553-mx.png","assets/viewPano/resource/pano-20190925110216-mx.png","assets/viewPano/resource/pano-20190925110449-mx.png","assets/viewPano/resource/pano-20190925110659-mx.png","assets/viewPano/resource/pano-20190925111017-mx.png","assets/viewPano/resource/pano-20190925111251-mx.png","assets/viewPano/resource/pano-20190925111418-mx.png","assets/viewPano/resource/pano-20190925111628-mx.png","assets/viewPano/resource/pano-20190925111907-mx.png","assets/viewPano/resource/pano-20190925112004-mx.png","assets/viewPano/resource/pano-20190925112226-mx.png","assets/viewPano/resource/pano-20190925112242-mx.png","assets/viewPano/resource/pano-20190925112410-mx.png","assets/viewPano/resource/pano-20190925112418-mx.png","assets/viewPano/resource/pano-20190925112754-mx.png","assets/viewPano/resource/pano-20190925112757-mx.png","assets/viewPano/resource/pano-20190925112929-mx.png","assets/viewPano/resource/pano-20190925112944-mx.png","assets/viewPano/resource/pano-20190925113109-mx.png","assets/viewPano/resource/pano-20190925113249-mx.png","assets/viewPano/resource/pano-20190925113346-mx.png","components/layout.tsx","api/index.ts","maps.tsx","minimap.tsx","geo.tsx","shapes.tsx","components/spinner.tsx","pano.tsx","App.tsx","index.tsx","assets/viewPano/resource sync /^/.*$"],"names":["module","exports","__webpack_require__","p","Container","styled","div","_templateObject","Header","_templateObject2","Content","_templateObject3","NAV_BAR_HEIGHT","getDataFromJSONArray","data","query","id","i","length","resultArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","param","value","push","err","return","result","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getNeighbors","nhood","Array","isArray","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","hood","arr","getTwoNeighbors","mockedNeighbors","prototype","apply","map","type","apis","getPanoFileNameById","Promise","resolve","mockedPanos","getPanoCoordById","getAllPanoIdAndCoord","getPanoAllAttrById","getNeighborsById","neighborhood","StyledMap","Map","maps_templateObject","maps_templateObject2","regions","boston","lat","lng","concord","MapContainer","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","bounds","google","maps","LatLngBounds","state","showComp","_this2","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","api","then","coordArr","coord","setState","coords","stop","arguments","getAllPanoCoords","extend","LatLng","_this3","setBounds","index","react_default","createElement","dist","lid","position","onClick","e","showComponent","gotoPano","key","history","concat","ref","onMapMounted","zoom","center","match","params","region","initialCenter","addMarkers","Component","EnhancedMap","GoogleApiWrapper","apiKey","process","withRouter","maps_Container","minimapElement","minimap_templateObject","minimap_templateObject2","mapHandlerInit","document","getElementsByClassName","addEventListener","preventDefault","style","width","height","minimapZoomIn","minimapZoomOut","MapStore","_class","cameraY","initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","bearing","cameraYtoAbsRadian","createClass","applyDecoratedDescriptor","observable","configurable","enumerable","writable","initializer","observer","panoStore","mapStore","_this$state","minimap_StyledMap","onReady","streetViewControl","fullscreenControl","mapTypeControl","rotateControl","Minimap","minimap","minimap_Container","Location","calibration","fname","neighborArr","setAllAttr","filename","getNeighborIds","_callee2","_context2","updateCalibration","_ref3","_callee3","camera","_context3","rotation","y","alert","_x","loc","geolib","neighbor","getDistanceTo","getBearingTo","Arrow","mesh","material","geometry","THREE","color","Rings","spinner_templateObject","_ref$width","_ref2","_ref2$width","_ref3$color","TWEEN","require","Pano","currLoc","neighbors","panoIdChangeReaction","cylindergeometry","cylindermaterial","cylindermesh","texture","loader","lines","tempcylindergeometry","tempcylindermaterial","tempcylindermesh","threeCamera","threeScene","cone0","cone1","cone2","n0","n1","n2","teleportToScene","load","side","scale","add","animateTeleportationTextureFade","console","error","fadeBegin","at","opacity","crossfade","Tween","to","easing","Easing","Quadratic","InOut","onUpdate","onComplete","fov","updateProjectionMatrix","transparent","remove","dispose","setNeighbors","RenderArrows","start","iter","keys","get","log","z","Math","cos","PI","x","sin","visible","size","isLoading","RenderPano","bind","assertThisInitialized","disableBodyScroll","querySelector","panoId","loadTexture","setCurrLocAndNeighbors","clear","nidArr","nid","nextLoc","addNeighbor","n","set","location","distance","_this4","PanoStore","reaction","rotBegin","tweenRot","_this5","mainCam","useRef","_useThree","useThree","gl","canvas","scene","setSize","clientWidth","clientHeight","lookAt","cone","conemesh","conemesh1","conemesh2","current","mouseDown","mouseX","startX","rotateScene","deltaX","evt","clientX","clientY","onMouseMove","event","path","wheelDeltaY","targetTouches","pageX","onTouchMove","window","aspect","animateTransition","camAt","endAt","rotEnd","zVal","xVal","fovValue","zoomEnd","tweenZoom","_callee5","_context6","chain","transitionToScene","_ref5","_callee6","_context7","_x2","coneGroup","compassGroup","triGeo","triGeoArr","setChildrenOpacity","group","opc","vertices","faces","computeFaceNormals","testMesh","useRender","update","Fragment","innerWidth","innerHeight","self","onPointerOver","object","onPointerOut","attach","CameraLookNorth","children","className","spinner","react_three_fiber_dist","pano_class","pano_descriptor","routes","title","ReactDOM","render","react_router_dom","r","activeClassName","react_router","component","GMap","exact","from","getElementById","./pano-20190724143458-mx.png","./pano-20190724143833-mx.png","./pano-20190724145944-mx.png","./pano-20190724150711-mx.png","./pano-20190724151238-mx.png","./pano-20190724151553-mx.png","./pano-20190925110216-mx.png","./pano-20190925110449-mx.png","./pano-20190925110659-mx.png","./pano-20190925111017-mx.png","./pano-20190925111251-mx.png","./pano-20190925111418-mx.png","./pano-20190925111628-mx.png","./pano-20190925111907-mx.png","./pano-20190925112004-mx.png","./pano-20190925112226-mx.png","./pano-20190925112242-mx.png","./pano-20190925112410-mx.png","./pano-20190925112418-mx.png","./pano-20190925112754-mx.png","./pano-20190925112757-mx.png","./pano-20190925112929-mx.png","./pano-20190925112944-mx.png","./pano-20190925113109-mx.png","./pano-20190925113249-mx.png","./pano-20190925113346-mx.png","webpackContext","req","webpackContextResolve","o","Error","code"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,g6BCGjC,IAGMC,EAAYC,IAAOC,IAAVC,KAOTC,EAASH,IAAOC,IAAVG,IATY,GADD,GACC,IAgClBC,EAAUL,IAAOC,IAAVK,IAGJC,yFCfhB,SAASC,EAAqBC,EAAMC,EAAOC,GACvC,IAAIA,EACA,IAAI,IAAIC,EAAE,EAAGA,EAAEH,EAAKI,OAAQD,IAAI,CAC5B,IAAIE,EAAY,GADYC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAE5B,QAAAC,EAAAC,EAAiBV,EAAjBW,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAuB,KAAfU,EAAeN,EAAAO,MACnBZ,EAAUa,KAAKlB,EAAKG,GAAGa,KAHC,MAAAG,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAK,EAAAS,QAAAT,EAAAS,SAAA,WAAAb,EAAA,MAAAC,GAK5B,OAAOH,EAGf,IAAQF,EAAE,EAAGA,EAAEH,EAAKI,OAAQD,IACxB,GAAGH,EAAKG,GAAL,KAAgBD,EAAG,CAClB,GAAkB,IAAfD,EAAMG,OACL,OAAOJ,EAAKG,GAChB,IAAIkB,EAAS,GAHKC,GAAA,EAAAC,GAAA,EAAAC,OAAAf,EAAA,IAIlB,QAAAgB,EAAAC,EAAiBzB,EAAjBW,OAAAC,cAAAS,GAAAG,EAAAC,EAAAZ,QAAAC,MAAAO,GAAA,EAAuB,KAAfN,EAAeS,EAAAR,MACnBI,EAAOL,GAAOhB,EAAKG,GAAGa,IALR,MAAAG,GAAAI,GAAA,EAAAC,EAAAL,EAAA,YAAAG,GAAA,MAAAI,EAAAN,QAAAM,EAAAN,SAAA,WAAAG,EAAA,MAAAC,GAOlB,OAAOH,GASnB,SAASM,EAAazB,EAAI0B,GACtB,GAAGC,MAAMC,QAAQF,GAAO,CACpB,IAAIP,EAAS,GADOU,GAAA,EAAAC,GAAA,EAAAC,OAAAxB,EAAA,IAEpB,QAAAyB,EAAAC,EAAgBP,EAAhBhB,OAAAC,cAAAkB,GAAAG,EAAAC,EAAArB,QAAAC,MAAAgB,GAAA,EAAsB,KAAdK,EAAcF,EAAAjB,MACdoB,EAAMC,EAAgBpC,EAAGqC,EAAgBH,IAC7CP,MAAMW,UAAUtB,KAAKuB,MAAMpB,EAAQgB,IAJnB,MAAAlB,GAAAa,GAAA,EAAAC,EAAAd,EAAA,YAAAY,GAAA,MAAAI,EAAAf,QAAAe,EAAAf,SAAA,WAAAY,EAAA,MAAAC,GAMpB,OAAOZ,EAGP,OADUiB,EAAgBpC,EAAIqC,EAAgBX,IAKtD,SAASU,EAAgBpC,EAAIkC,GACzB,GAAGA,EAAKM,IAAItC,OAAO,EACf,MAAO,GAEX,OAAQgC,EAAKO,MACT,IAAK,SACD,IAAK,IAAIxC,EAAI,EAAGA,EAAIiC,EAAKM,IAAItC,OAAQD,IACjC,GAAID,IAAOkC,EAAKM,IAAIvC,GAChB,OAAU,IAANA,EACO,CAACiC,EAAKM,IAAI,IACZvC,IAAMiC,EAAKM,IAAItC,OAAS,EACtB,CAACgC,EAAKM,IAAIN,EAAKM,IAAItC,OAAS,IAEhC,CAACgC,EAAKM,IAAIvC,EAAI,GAAIiC,EAAKM,IAAIvC,EAAI,IAG9C,MAEJ,IAAK,WACD,IAASA,EAAI,EAAGA,EAAIiC,EAAKM,IAAItC,OAAQD,IACjC,GAAID,IAAOkC,EAAKM,IAAIvC,GAChB,OAAU,IAANA,EACO,CAACiC,EAAKM,IAAI,GAAIN,EAAKM,IAAIN,EAAKM,IAAItC,OAAO,IACzCD,IAAMiC,EAAKM,IAAItC,OAAS,EACtB,CAACgC,EAAKM,IAAIN,EAAKM,IAAItC,OAAS,GAAIgC,EAAKM,IAAI,IAE7C,CAACN,EAAKM,IAAIvC,EAAI,GAAIiC,EAAKM,IAAIvC,EAAI,IAG9C,MAEJ,IAAK,YACD,OAAOiC,EAAKM,IAAIxC,IAOrB,IAqBQ0C,EAdF,CAOTC,oBAV+B,SAAC3C,GAAD,OAAQ4C,QAAQC,QAAQ,CAAE/C,KAAM,CAAEA,KAAOD,EAAqBiD,EAAY,CAAC,YAAa9C,OAWvH+C,iBAf4B,SAAC/C,GAAD,OAAQ4C,QAAQC,QAAQ,CAAE/C,KAAM,CAAEA,KAAMD,EAAqBiD,EAAY,CAAC,SAAU9C,OAgBhHgD,qBAdgC,kBAAMJ,QAAQC,QAAQ,CAAE/C,KAAM,CAAEA,KAAMgD,MAetEG,mBAd8B,SAACjD,GAAD,OAAQ4C,QAAQC,QAAQ,CAAE/C,KAAM,CAAEA,KAAMD,EAAqBiD,EAAY,GAAI9C,OAe3GkD,iBAb4B,SAAClD,EAAImD,GAAL,OAAsBP,QAAQC,QAAQ,CAAE/C,KAAM,CAAEA,KAAM2B,EAAazB,EAAImD,yUChGvG,cAAMC,EAAY/D,YAAOgE,MAAPhE,CAAHiE,KAMTlE,EAAYC,IAAOC,IAAViE,KAUTC,EAAU,CACfC,OAAS,CACRC,IAAI,MAAOC,KAAK,QAEjBC,QAAU,CACTF,IAAK,SAAUC,KAAM,UAgBjBE,cACL,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAClBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAgCPQ,OAAS,IAAKP,EAAKD,MAAcS,OAAOC,KAAKC,aA/B5CV,EAAKW,MAAQ,CACZC,UAAU,GAHOZ,mFAOC,IAAAa,EAAAV,MACC,eAAAW,EAAAb,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAxE,MAAA,cAAAwE,EAAAxE,KAAA,EAChB0E,EAAItC,uBAAuBuC,KAAK,SAAApE,GAGrC,IAFA,IAAIqE,EAAW,GACX1F,EAAOqB,EAAOrB,KAAKA,KACdG,EAAI,EAAGA,EAAIH,EAAKI,OAAQD,IAChCuF,EAASxE,KAAK,CACbhB,GAAIF,EAAKG,GAAGD,GACZ0D,IAAK5D,EAAKG,GAAGwF,MAAM/B,IACnBC,IAAK7D,EAAKG,GAAGwF,MAAM9B,MAGrBiB,EAAKc,SAAS,CACbC,OAAQH,EACRb,UAAU,MAbU,wBAAAS,EAAAQ,SAAAV,MAAH,yBAAAL,EAAAtC,MAAA2B,KAAA2B,aAAA,EAiBpBC,yCAGa7F,IACH,IAANA,IAAoB,IAANA,GAClBiE,KAAKwB,SAAS,CAAEf,SAAU1E,wCAM1B,IAAK,IAAIA,EAAI,EAAGA,EAAKiE,KAAKQ,MAAciB,OAAOzF,OAAQD,IAAK,CAC3D,IAAIwF,EAASvB,KAAKQ,MAAciB,OAAO1F,GACvCiE,KAAKI,OAAOyB,OACX,IAAK7B,KAAKJ,MAAcS,OAAOC,KAAKwB,OAAO,CAC1CtC,IAAK+B,EAAM/B,IACXC,IAAK8B,EAAM9B,6CAMF,IAAAsC,EAAA/B,KAIZ,OAHAA,KAAKgC,YAGGhC,KAAKQ,MAAciB,OAAOnD,IAAI,SAACiD,EAAOU,GAC7C,OACCC,EAAApB,EAAAqB,cAACC,EAAA,OAAD,CACCC,IAAKd,EAAMzF,GACXwG,SAAU,CACT9C,IAAK+B,EAAM/B,IACXC,IAAK8B,EAAM9B,KAEZ8C,QAAS,SAAAC,GAER,OADAT,EAAKU,eAAc,GACZV,EAAKW,SAASF,EAAEH,MAExBM,IAAKpB,EAAMzF,wCAMNA,GAERkE,KAAKJ,MAAMgD,QAAQ9F,KAAnB,aAAA+F,OAAqC/G,qCAKrC,OADqBkE,KAAKQ,MAAlBC,SAEPyB,EAAApB,EAAAqB,cAACjD,EAAD,CACC4D,IAAM9C,KAAKJ,MAAcmD,aACzB1C,OAASL,KAAKJ,MAAcS,OAC5B2C,KAAM,GACNC,OAAQ3D,EAAQU,KAAKJ,MAAMsD,MAAMC,OAAOC,QACxCC,cAAe,CAAE7D,IAAK,SAAUC,KAAM,SACtCW,OAAQJ,KAAKI,QAEZJ,KAAKsD,cAEJ,YAxFqBC,aA4FrBC,EAAcC,2BAAiB,CACpCC,OAAM,GAAAb,OAAKc,4CADQF,CAEjBG,YAAWjE,IAMCW,EAAA,SAAAV,GAAK,OACnBsC,EAAApB,EAAAqB,cAAC0B,EAAD,KACC3B,EAAApB,EAAAqB,cAACqB,EAAgB5D,sZC7InB,IAgBIkE,GAhBE5E,GAAY/D,YAAOgE,MAAPhE,CAAH4I,MAMT7I,GAAYC,IAAOC,IAAV4I,KAWXC,GAAiB,YACpBH,GAAkBI,SAASC,uBAAuB,WAA6C,IAEhFC,iBAAiB,YAAa,SAAA5B,GAAC,OAG/C,SAAuBA,GACtBA,EAAE6B,iBACFP,GAAeQ,MAAMC,MAAQ,QAC7BT,GAAeQ,MAAME,OAAS,QANoBC,CAAcjC,KAAI,GACpEsB,GAAeM,iBAAiB,WAAY,SAAA5B,GAAC,OAQ9C,SAAwBA,GACvBA,EAAE6B,iBACFP,GAAeQ,MAAMC,MAAQ,QAC7BT,GAAeQ,MAAME,OAAS,QAXmBE,CAAelC,KAAI,IAiC9D,IAAMmC,IAAbC,EAAA,WAKC,SAAAD,EAAYnF,EAAKC,EAAKoF,GAAS/E,OAAAC,EAAA,EAAAD,CAAAE,KAAA2E,GAAA7E,OAAAgF,EAAA,EAAAhF,CAAAE,KAAA,MAAA+E,EAAA/E,MAAAF,OAAAgF,EAAA,EAAAhF,CAAAE,KAAA,MAAAgF,EAAAhF,MAAAF,OAAAgF,EAAA,EAAAhF,CAAAE,KAAA,UAAAiF,EAAAjF,MAC9BA,KAAKP,IAAMA,EACXO,KAAKR,IAAMA,EACXQ,KAAKkF,QAAUlF,KAAKmF,mBAAoBN,GAR1C,OAAA/E,OAAAsF,EAAA,EAAAtF,CAAA6E,EAAA,EAAAhC,IAAA,eAAA9F,MAAA,SAWc2C,EAAKC,EAAKoF,GACtB7E,KAAKP,IAAMA,EACXO,KAAKR,IAAMA,EACXQ,KAAKkF,QAAUlF,KAAKmF,mBAAoBN,KAd1C,CAAAlC,IAAA,qBAAA9F,MAAA,SAiBoBgI,GAClB,OAAOA,MAlBTF,EAAA,GAAAI,EAAAjF,OAAAuF,EAAA,EAAAvF,CAAA8E,EAAAxG,UAAA,OACEkH,KADF,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,OAAAV,EAAAlF,OAAAuF,EAAA,EAAAvF,CAAA8E,EAAAxG,UAAA,OAEEkH,KAFF,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,OAAAT,EAAAnF,OAAAuF,EAAA,EAAAvF,CAAA8E,EAAAxG,UAAA,WAGEkH,KAHF,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,OAAAd,GAwBMjF,GADLgG,0BAKA,SAAAhG,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAClBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAHPgG,eAEmB,EAAA/F,EAmCnBO,OAAS,IAAKP,EAAKD,MAAcS,OAAOC,KAAKC,aAjC5CV,EAAKW,MAAQ,CACZC,UAAU,EACVoF,SAAWhG,EAAKD,MAAciG,UAE/BhG,EAAK+F,UAAa/F,EAAKD,MAAcgG,UANnB/F,mFASC,IAAAa,EAAAV,MACC,eAAAW,EAAAb,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAxE,MAAA,cAAAwE,EAAAxE,KAAA,EAChB0E,EAAItC,uBAAuBuC,KAAK,SAAApE,GAGrC,IAFA,IAAIqE,EAAW,GACX1F,EAAOqB,EAAOrB,KAAKA,KACdG,EAAI,EAAGA,EAAIH,EAAKI,OAAQD,IAChCuF,EAASxE,KAAK,CACbhB,GAAIF,EAAKG,GAAGD,GACZ0D,IAAK5D,EAAKG,GAAGwF,MAAM/B,IACnBC,IAAK7D,EAAKG,GAAGwF,MAAM9B,MAGrBiB,EAAKc,SAAS,CACbC,OAAQH,EACRb,UAAU,MAbU,wBAAAS,EAAAQ,SAAAV,MAAH,yBAAAL,EAAAtC,MAAA2B,KAAA2B,aAAA,EAiBpBC,yCAGa7F,IACH,IAANA,IAAoB,IAANA,GAClBiE,KAAKwB,SAAS,CAAEf,SAAU1E,wCAM1B,IAAK,IAAIA,EAAI,EAAGA,EAAKiE,KAAKQ,MAAciB,OAAOzF,OAAQD,IAAK,CAC3D,IAAIwF,EAASvB,KAAKQ,MAAciB,OAAO1F,GACvCiE,KAAKI,OAAOyB,OACX,IAAK7B,KAAKJ,MAAcS,OAAOC,KAAKwB,OAAO,CAC1CtC,IAAK+B,EAAM/B,IACXC,IAAK8B,EAAM9B,6CAMF,IAAAsC,EAAA/B,KAIZ,OAHAA,KAAKgC,YAGGhC,KAAKQ,MAAciB,OAAOnD,IAAI,SAACiD,EAAOU,GAC7C,OACCC,EAAApB,EAAAqB,cAACC,EAAA,OAAD,CACCC,IAAKd,EAAMzF,GACXwG,SAAU,CACT9C,IAAK+B,EAAM/B,IACXC,IAAK8B,EAAM9B,KAEZ8C,QAAS,SAAAC,GACR,OAAOT,EAAKW,SAASF,EAAEH,MAExBM,IAAKpB,EAAMzF,wCAMNA,GAIRkE,KAAK4F,UAAU9J,GAAKA,mCAGZ,IAAAgK,EACuB9F,KAAKQ,MAA5BC,EADAqF,EACArF,SAAUoF,EADVC,EACUD,SAElB,OAAOpF,EACNyB,EAAApB,EAAAqB,cAAC4D,GAAD,CACCjD,IAAM9C,KAAKJ,MAAcmD,aACzB1C,OAASL,KAAKJ,MAAcS,OAC5B2C,KAAM,GACNC,OAAQ,CAAEzD,IAAKqG,EAASrG,IAAKC,IAAKoG,EAASpG,KAC3C4D,cAAe,CAAE7D,IAAKqG,EAASrG,IAAKC,IAAKoG,EAASpG,KAClDW,OAAQJ,KAAKI,OACb4F,QAAS/B,GACTgC,mBAAmB,EACnBC,mBAAmB,EACnBC,gBAAgB,EAChBC,eAAe,GAEfpG,KAAKsD,cAEH,YApGqBC,iBAwGrB8C,GAAU5C,2BAAiB,CAChCC,OAAM,GAAAb,OAAKc,4CADIF,CAEbG,YAAWjE,KAEC2G,GAAA,SAAA1G,GAAK,OACnBsC,EAAApB,EAAAqB,cAACoE,GAAD,KACCrE,EAAApB,EAAAqB,cAACkE,GAAYzG,cCpMT4G,cAcF,SAAAA,EAAY1K,GAAY,IAAA+D,EAAAG,KAAAF,OAAAC,EAAA,EAAAD,CAAAE,KAAAwG,GAAAxG,KAZxBuB,MAGI,CAAE/B,IAAK,EAAGC,IAAK,GASKO,KARxByG,YAAsB,EAQEzG,KAPxBlE,QAOwB,EAAAkE,KANxB0G,MAAgB,GAMQ1G,KALxBf,aAAuB,GAKCe,KAJxB2G,iBAIwB,EAAA3G,KAHxB6E,aAGwB,EAAA7E,KAIxB4G,WAJwB9G,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAIX,SAAAC,IAAA,OAAAH,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAxE,MAAA,cAAAwE,EAAAxE,KAAA,EACH0E,EAAIrC,mBAAmBc,EAAK/D,IAAIuF,KAAK,SAAApE,GACvC4C,EAAK6G,MAAQzJ,EAAOrB,KAAKA,KAAKiL,SAC9BhH,EAAK0B,MAAM/B,IAAMvC,EAAOrB,KAAKA,KAAK2F,MAAM/B,IACxCK,EAAK0B,MAAM9B,IAAMxC,EAAOrB,KAAKA,KAAK2F,MAAM9B,IACxCI,EAAK4G,YAAcxJ,EAAOrB,KAAKA,KAAK6K,YACpC5G,EAAKZ,aAAehC,EAAOrB,KAAKA,KAAKqD,eANhC,wBAAAiC,EAAAQ,SAAAV,MAJWhB,KAcxB8G,eAdwBhH,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAcP,SAAAgG,IAAA,OAAAlG,EAAAC,EAAAG,KAAA,SAAA+F,GAAA,cAAAA,EAAA7F,KAAA6F,EAAAtK,MAAA,cAAAsK,EAAAtK,KAAA,EACP0E,EAAIpC,iBAAiBa,EAAK/D,GAAI+D,EAAKZ,cAAcoC,KAAK,SAAApE,GACxD4C,EAAK8G,YAAc1J,EAAOrB,KAAKA,OAFtB,wBAAAoL,EAAAtF,SAAAqF,MAdO/G,KAoCxBiH,kBApCwB,eAAAC,EAAApH,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAoCJ,SAAAoG,EAAOC,GAAP,OAAAvG,EAAAC,EAAAG,KAAA,SAAAoG,GAAA,cAAAA,EAAAlG,KAAAkG,EAAA3K,MAAA,QACA,CACZ+J,aAAgBW,EAAOE,SAASC,IAGpCC,MAAM,kDALU,wBAAAH,EAAA3F,SAAAyF,MApCI,gBAAAM,GAAA,OAAAP,EAAA7I,MAAA2B,KAAA2B,YAAA,GACpB3B,KAAKlE,GAAKA,4DAmBA4L,GACV,OAAOC,eAAmB3H,KAAKuB,MAAMmG,EAAInG,sDAGtBqG,GACnB,OAAOA,EAAStJ,IAAI0B,KAAK6H,oDAGhBH,GACT,OAAOC,uBAA2B3H,KAAKuB,MAAOmG,EAAInG,qDAGhCqG,GAClB,OAAOA,EAAStJ,IAAI0B,KAAK8H,uBCzB3BC,cAOF,SAAAA,IAAcjI,OAAAC,EAAA,EAAAD,CAAAE,KAAA+H,GAAA/H,KALdgI,UAKa,EAAAhI,KAJbiI,cAIa,EAAAjI,KAHbkI,cAGa,EAAAlI,KAFblE,QAEa,EACTkE,KAAKkI,SAAW,IAAIC,qBAAyB,GAAI,EAAE,IACnDnI,KAAKiI,SAAW,IAAIE,oBAAwB,CAACC,MAAM,UACnDpI,KAAKgI,KAAO,IAAIG,OAAWnI,KAAKkI,SAASlI,KAAKiI,kpCChCtD,UA4CeI,GA5CDlN,IAAOC,IAAVkN,KAIA,SAAA3H,GAAA,IAAA4H,EAAA5H,EAAG4D,MAAH,gBAAAgE,EAAW,KAAXA,GACC,SAAAC,GAAA,IAAAC,EAAAD,EAAGjE,MAAH,gBAAAkE,EAAW,KAAXA,GAUiB,SAAAvB,GAAA,IAAAwB,EAAAxB,EAAGkB,MAAH,gBAAAM,EAAW,UAAXA,ICFvBC,GAAQC,EAAQ,KAahBC,eAQL,SAAAA,EAAYjJ,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6I,IAClBhJ,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+I,GAAA1I,KAAAH,KAAMJ,KAPPkJ,aAMmB,EAAAjJ,EALnBkJ,eAKmB,EAAAlJ,EAJnBgG,cAAWxJ,EAIQwD,EAHnB+F,eAAYvJ,EAGOwD,EAFnBmJ,0BAEmB,EAAAnJ,EAuDnBoJ,iBAAmB,IAAId,yBAA6B,GAAI,GAAI,GAAI,IAAK,GAAG,GAvDrDtI,EAwDnBqJ,sBAAmB7M,EAxDAwD,EAyDnBsJ,kBAAe9M,EAzDIwD,EA0DnBuJ,aAAU/M,EA1DSwD,EA2DnBwJ,OAAS,IAAIlB,gBA3DMtI,EA4DnByJ,MAAQ,GA5DWzJ,EA8DhB0J,qBAAuB,IAAIpB,yBAA6B,GAAI,GAAI,GAAI,IAAK,GAAG,GA9D5DtI,EA+DnB2J,0BAAuBnN,EA/DJwD,EAgEnB4J,sBAAmBpN,EAhEAwD,EAiEnB6J,iBAAcrN,EAjEKwD,EAkEnB8J,gBAAatN,EAlEMwD,EAoEnB+J,WApEmB,EAAA/J,EAqEnBgK,WArEmB,EAAAhK,EAsEnBiK,WAtEmB,EAAAjK,EAyEnBkK,QAzEmB,EAAAlK,EA0EnBmK,QA1EmB,EAAAnK,EA2EnBoK,QA3EmB,EAAApK,EA4JnBqK,gBA5JmB,eAAAvJ,EAAAb,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KA4JD,SAAAC,EAAOlF,GAAP,OAAA+E,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAxE,MAAA,cAEjBmD,EAAKiJ,QAAU,IAAItC,GAAS1K,GAFXoF,EAAAxE,KAAA,EAGXmD,EAAKiJ,QAAQlC,aAAavF,KAAK,WACpCxB,EAAKuJ,QAAUvJ,EAAKwJ,OAAOc,KAC1BvB,MAAQ,KAAA/F,OAA8BhD,EAAKiJ,QAAQpC,QACnD,WACC7G,EAAK2J,qBAAuB,IAAIrB,oBAAwB,CACvD7J,IAAKuB,EAAKuJ,QACVgB,KAAMjC,eAEPtI,EAAK4J,iBAAmB,IAAItB,OAC3BtI,EAAK0J,qBACL1J,EAAK2J,sBAEN3J,EAAK0J,qBAAqBc,OAAO,EAAG,EAAG,GACvCxK,EAAK4J,iBAAiBnC,SAASC,EAAI1H,EAAKiJ,QAAQrC,YAChD5G,EAAK8J,WAAWW,IAAIzK,EAAK4J,kBACzB5J,EAAK0K,kCACL1K,EAAKgG,SAASrG,IAAMK,EAAKiJ,QAAQvH,MAAM/B,IACvCK,EAAKgG,SAASpG,IAAMI,EAAKiJ,QAAQvH,MAAM9B,IACvCI,EAAKgG,SAASX,QAAUrF,EAAKiJ,QAAQjE,cAEtCxI,EACA,SAAAU,GACCyN,QAAQC,MAAM1N,OAzBA,wBAAAmE,EAAAQ,SAAAV,MA5JC,gBAAAyG,GAAA,OAAA9G,EAAAtC,MAAA2B,KAAA2B,YAAA,GAAA9B,EA2LnB0K,gCAAkC,WACjC,IAAIG,EAAY,CACfC,GAAI9K,EAAKqJ,iBAAiB0B,SAKvBC,EAAY,IAAIlC,GAAMmC,MAAMJ,GAC9BK,GAJY,CACbJ,GAAI,IAGS,KACZK,OAAOrC,GAAMsC,OAAOC,UAAUC,OAChCN,EAAUO,SAAS,WAElBvL,EAAKqJ,iBAAiB0B,QAAUF,EAAUC,KAE3CE,EAAUQ,WAAVvL,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAAsB,SAAAgG,IAAA,OAAAlG,EAAAC,EAAAG,KAAA,SAAA+F,GAAA,cAAAA,EAAA7F,KAAA6F,EAAAtK,MAAA,cAErBmD,EAAK6J,YAAYpC,SAASC,EAAI,EAC7B1H,EAAK6J,YAAoB4B,IAAM,GAC/BzL,EAAK6J,YAAoB6B,yBAG1B1L,EAAKqJ,iBAAiB5K,IAAMuB,EAAKuJ,QACjCvJ,EAAKsJ,aAAa7B,SAASC,EAAI1H,EAAKiJ,QAAQrC,YAC5C5G,EAAKqJ,iBAAiBsC,aAAc,EACpC3L,EAAKqJ,iBAAiB0B,QAAU,EAEhC/K,EAAK8J,WAAW8B,OAAO5L,EAAK4J,kBAC5B5J,EAAK4J,iBAAiBvB,SAASwD,UAC/B7L,EAAK4J,iBAAiBxB,SAASyD,UAC/B7L,EAAK4J,sBAAmBpN,EACxBwD,EAAK0J,qBAAqBc,OAAO,EAAE,EAAE,GAhBhBrD,EAAAtK,KAAA,GAiBfmD,EAAK8L,eAAetK,KAAKxB,EAAK+L,cAjBf,yBAAA5E,EAAAtF,SAAAqF,OAmBtBlH,EAAKqJ,iBAAiBsC,aAAc,EACpCX,EAAUgB,SA7NQhM,EAgOnB+L,aAAe,WACd,IAAIE,EAAOjM,EAAKkJ,UAAUgD,OAE1BlM,EAAKkK,GAAKlK,EAAKkJ,UAAUiD,IAAIF,EAAKpP,OAAOG,OACzC2N,QAAQyB,IAAIpM,EAAKiJ,QAAQhN,IAEzB+D,EAAK+J,MAAMtH,SAAS4J,GAAKC,KAAKC,IAAIvM,EAAKkK,GAAG7E,QAAUiH,KAAKE,GAAK,KAC9DxM,EAAK+J,MAAMtH,SAASgK,EAAIH,KAAKI,IAAI1M,EAAKkK,GAAG7E,QAAUiH,KAAKE,GAAK,KAE7DxM,EAAK+J,MAAMtC,SAASgF,GAAK,OACzBzM,EAAK+J,MAAMtC,SAAS4E,GAAMrM,EAAKkK,GAAG7E,QAAWiH,KAAKE,GAAK,IACvDxM,EAAKgK,MAAM2C,SAAU,EACrB3M,EAAKiK,MAAM0C,SAAU,EAClB3M,EAAKkJ,UAAU0D,KAAK,IACtB5M,EAAKmK,GAAKnK,EAAKkJ,UAAUiD,IAAIF,EAAKpP,OAAOG,OACzCgD,EAAKgK,MAAM2C,SAAU,EAErB3M,EAAKgK,MAAMvH,SAAS4J,GAAKC,KAAKC,IAAIvM,EAAKmK,GAAG9E,QAAUiH,KAAKE,GAAK,KAC9DxM,EAAKgK,MAAMvH,SAASgK,EAAIH,KAAKI,IAAI1M,EAAKmK,GAAG9E,QAAUiH,KAAKE,GAAK,KAE7DxM,EAAKgK,MAAMvC,SAASgF,GAAK,OACzBzM,EAAKgK,MAAMvC,SAAS4E,GAAMrM,EAAKmK,GAAG9E,QAAWiH,KAAKE,GAAK,KAE/B,IAAtBxM,EAAKkJ,UAAU0D,OACjB5M,EAAKoK,GAAKpK,EAAKkJ,UAAUiD,IAAIF,EAAKpP,OAAOG,OACzCgD,EAAKiK,MAAM0C,SAAU,EAErB3M,EAAKiK,MAAMxH,SAAS4J,GAAKC,KAAKC,IAAIvM,EAAKoK,GAAG/E,QAAUiH,KAAKE,GAAK,KAC9DxM,EAAKiK,MAAMxH,SAASgK,EAAIH,KAAKI,IAAI1M,EAAKoK,GAAG/E,QAAUiH,KAAKE,GAAK,KAE7DxM,EAAKiK,MAAMxC,SAASgF,GAAK,OACzBzM,EAAKiK,MAAMxC,SAAS4E,GAAMrM,EAAKoK,GAAG/E,QAAWiH,KAAKE,GAAK,MA7PxDxM,EAAKW,MAAQ,CACZkM,WAAW,GAEZ7M,EAAK8M,WAAa9M,EAAK8M,WAAWC,KAAhB9M,OAAA+M,EAAA,EAAA/M,CAAAD,IALAA,mFAaC,IAAAa,EAAAV,KACnB8M,4BAAkB5I,SAAS6I,cAAc,eACf,eAAA7F,EAAApH,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAAG,SAAAoG,IAAA,OAAAtG,EAAAC,EAAAG,KAAA,SAAAoG,GAAA,cAAAA,EAAAlG,KAAAkG,EAAA3K,MAAA,cAE5BgE,EAAKoI,QAAU,IAAItC,GAAS9F,EAAKsM,QAFL3F,EAAA3K,KAAA,EAGtBgE,EAAKoI,QAAQlC,aAAavF,KAAK,WACpCX,EAAKuM,gBAJsB,OAO5BvM,EAAKqI,UAAY,IAAI5J,IACrBuB,EAAKiL,eARuB,wBAAAtE,EAAA3F,SAAAyF,MAAH,yBAAAD,EAAA7I,MAAA2B,KAAA2B,YAAA,EAU1BuL,kLAIMlN,KAAK+I,UAAUoE,iBACfnN,KAAK8I,QAAQhC,2BAES,KADxBsG,EAASpN,KAAK8I,QAAQnC,aACP3K,8BAClBwO,QAAQyB,IAAI,6LAIJoB,UACHC,EAAU,IAAI9G,GAAS6G,YACrBC,EAAQ1G,aAAavF,KAAK,WAC/BU,EAAKwL,YAAYD,+CAHJF,mhBASLI,GACXxN,KAAK+I,UAAU0E,IAAID,EAAE1R,GAAI,CACxB4R,SAAUF,EACVG,SAAU3N,KAAK8I,QAAQjB,cAAc2F,GACrCtI,QAASlF,KAAK8I,QAAQhB,aAAa0F,2CA6BvB,IAAAI,EAAA5N,KACbA,KAAKoJ,QAAUpJ,KAAKqJ,OAAOc,KAC1BvB,MAAQ,KAAA/F,OAA8B7C,KAAK8I,QAAQpC,QACnD,WACCkH,EAAK/H,SAAW,IAAIlB,GAASiJ,EAAK9E,QAAQvH,MAAM/B,IAAKoO,EAAK9E,QAAQvH,MAAM9B,IAAK,GAC7EmO,EAAKhI,UAAY,IAAIiI,GAAUD,EAAK9E,QAAQhN,IAC5C8R,EAAK5E,qBAAuB8E,YAC3B,kBAAMF,EAAKhI,UAAU9J,IACrB,SAACA,EAAIgS,GAEJF,EAAK1D,gBAAgBpO,KAIvB8R,EAAKpM,SAAS,CAAEkL,WAAW,UAE5BrQ,EACA,SAAAU,GACCyN,QAAQC,MAAM1N,KAIhBiD,KAAKkJ,iBAAmB,IAAIf,oBAAwB,CACnD7J,IAAK0B,KAAKoJ,QACVgB,KAAMjC,eAEPnI,KAAKmJ,aAAe,IAAIhB,OACvBnI,KAAKiJ,iBACLjJ,KAAKkJ,kBAENlJ,KAAKiJ,iBAAiBoB,OAAO,EAAG,EAAG,GAE7BrK,KAAKmJ,aAAa7B,SAASC,EAAIvH,KAAK8I,QAAQrC,oDA0BnCW,GACf,IAAI2G,EAAW,CACdpD,GAAIvD,EAAOE,SAASC,GAKjByG,EAAW,IAAIrF,GAAMmC,MAAMiD,GAC7BhD,GAJW,CACZJ,GAAI,GAGQ,KACXK,OAAOrC,GAAMsC,OAAOC,UAAUC,OAChC6C,EAAS5C,SAAS,WACjBhE,EAAOE,SAASC,EAAIwG,EAASpD,KAE9BqD,EAAS3C,WAAW,WACnBjE,EAAOE,SAASC,EAAI,IAErByG,EAASnC,6CA0GG,IAAAoC,EAAAjO,KACRkO,EAAUC,mBADFC,EAEwBC,cAA9BC,EAFMF,EAENE,GAAIlH,EAFEgH,EAEFhH,OAAQmH,EAFNH,EAEMG,OAAQC,EAFdJ,EAEcI,MAC1BxO,KAAK0J,YAActC,EACnBpH,KAAK2J,WAAa6E,EACjBpH,EAAekE,IAAM,GAEtBgD,EAAGG,QAAQF,EAAOG,YAAaH,EAAOI,cAEtCvH,EAAO9E,SAASmL,IAAI,EAAG,EAAG,GAC1BrG,EAAOwH,OAAO,EAAG,EAAG,GAEpB,IAAIC,EAAO,IAAI9G,GACX+G,EAAWX,mBACXY,EAAYZ,mBACZa,EAAYb,mBAEhBnO,KAAK4J,MAAQkF,EAASG,QACtBjP,KAAK6J,MAAQkF,EAAUE,QACvBjP,KAAK8J,MAAQkF,EAAUC,QAGvB,IAAIC,GAAY,EACfC,EAAS,EA6BV,IAAIC,EAAS,EAoBb,SAASC,EAAYC,GACpBlI,EAAOE,SAASC,GAAK+H,EAAS,IAC9BlI,EAAOE,SAASC,GAAK,EAAI4E,KAAKE,GAQ/BkC,EAAOnK,iBAAiB,YAAa,SAAA5B,GAAC,OAxDtC,SAAqB+M,GACpB,GAAKL,EAAL,CAGAK,EAAIlL,iBACJ,IAAIiL,EAASC,EAAIC,QAAUL,EACjBI,EAAIE,QACdN,EAASI,EAAIC,QACJD,EAAIE,QAEbJ,EAAYC,IA8C6BI,CAAYlN,KAAI,GAC1D+L,EAAOnK,iBAAiB,YAAa,SAAA5B,GAAC,OA5CjB+M,EA4CiC/M,GA3CjD6B,iBACJ6K,GAAY,EACZC,EAASI,EAAIC,aACJD,EAAIE,QAJd,IAAqBF,IA4CqC,GAC1DhB,EAAOnK,iBAAiB,UAAW,SAAA5B,GAAC,OAAcA,EArC7C6B,sBACJ6K,GAAY,KAoCyC,GACtDX,EAAOnK,iBAAiB,aAAc,SAAA5B,GApBtC,IAAkBmN,KAoBkCnN,GAnB1CoN,KAAK,KAAKrB,GAElBc,EADaM,EAAME,YAAc,KAkBoB,GACvDtB,EAAOnK,iBAAiB,YAAa,SAAA5B,GAAC,OA5BtC,SAAqBmN,GACpB,IAAIL,EAAUK,EAAMG,cAAc,GAAGC,MAAQX,EAC7CA,EAAUO,EAAMG,cAAc,GAAGC,MACjCV,EAAYC,GAyB6BU,CAAYxN,KAAI,GAC1D+L,EAAOnK,iBAAiB,aAAc,SAAA5B,GAhCrC4M,EAgCuD5M,EAhCvCsN,cAAc,GAAGC,QAgC0B,GAC5DE,OAAO7L,iBAAkB,SAXzB,WACCkK,EAAGG,QAASF,EAAOG,YAAaH,EAAOI,cACtCvH,EAAe8I,OAAS3B,EAAOG,YAAcH,EAAOI,aACpDvH,EAAemE,2BAQkC,GAEnD,IAAI4E,EAAoB,SAAArU,GAEvB,IAEMsU,EAASnC,EAAKlF,UAAUiD,IAAIlQ,GAAIoJ,QAAUiH,KAAKE,GAAM,IACvDgE,GAAUpC,EAAKlF,UAAUiD,IAAIlQ,GAAIoJ,QAAUiH,KAAKE,GAAM,IACtDjF,EAAOE,SAASC,EAAI,IACvB8I,EAAQ,EAAIlE,KAAKE,GAAM4B,EAAKlF,UAAUiD,IAAIlQ,GAAIoJ,QAAUiH,KAAKE,GAAM,KAEjEjF,EAAOE,SAASC,EAAE8I,GAASlE,KAAKE,IAAMjF,EAAOE,SAASC,EAAE8I,EAAM,EAAElE,KAAKE,GACvEgE,GAAS,EAAIlE,KAAKE,GACTjF,EAAOE,SAASC,EAAE8I,IAAUlE,KAAKE,IAAMjF,EAAOE,SAASC,EAAE8I,GAAQ,EAAElE,KAAKE,KACjFgE,GAAU,EAAIlE,KAAKE,GAAKgE,GAEzB,IAAItC,EAAW,CACdpD,GAAKvD,EAAeE,SAASC,GAE1B+I,EAAS,CACZ3F,GAAI0F,GAEDrC,EAAW,IAAIrF,GAAMmC,MAAMiD,GAC7BhD,GAAGuF,EAAQ,KACXtF,OAAOrC,GAAMsC,OAAOC,UAAUC,OAChC6C,EAAS5C,SAAS,WAChBhE,EAAeE,SAASC,EAAIwG,EAASpD,KAEvCqD,EAAS3C,WAAW,WACnBjE,EAAOE,SAASC,GAAM0G,EAAKlF,UAAUiD,IAAIlQ,GAAIoJ,QAAUiH,KAAKE,GAAM,MAInE,IAAIrJ,EAAO,CACVuN,KAAOnJ,EAAe9E,SAAS4J,EAC/BsE,KAAOpJ,EAAe9E,SAASgK,EACnBmE,SAAWrJ,EAAekE,IAC1BV,QAASqD,EAAK/E,iBAAiB0B,SAExC8F,EAAU,CACbH,MApCa,GAoCEpE,KAAKC,IAAIgE,GACxBI,KArCa,GAqCCrE,KAAKI,IAAI6D,GACXK,SArCE,GAsCF7F,QAAS,IAElB+F,EAAY,IAAIhI,GAAMmC,MAAM9H,GAAM+H,GAAG2F,EAAS,KAElDC,EAAUvF,SAAS,WACjBhE,EAAe9E,SAAS4J,EAAIlJ,EAAKuN,KACjCnJ,EAAe9E,SAASgK,EAAItJ,EAAKwN,KACjCpJ,EAAekE,IAAMtI,EAAKyN,SACdrJ,EAAemE,yBAChB0C,EAAK/E,iBAAiB0B,QAAU5H,EAAK4H,UAElD+F,EAAUtF,WAAVvL,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAAqB,SAAA6P,IAAA,OAAA/P,EAAAC,EAAAG,KAAA,SAAA4P,GAAA,cAAAA,EAAA1P,KAAA0P,EAAAnU,MAAA,cAER0K,EAAO9E,SAASmL,IAAI,EAAE,EAAE,GACnCrG,EAAekE,IAAM,GACTlE,EAAemE,yBAGhB0C,EAAK/E,iBAAiB5K,IAAM2P,EAAK7E,QACjC6E,EAAK9E,aAAa7B,SAASC,EAAI0G,EAAKnF,QAAQrC,YAC5CwH,EAAK/E,iBAAiBsC,aAAc,EACpCyC,EAAK/E,iBAAiB0B,QAAU,EAEhC4D,EAAM/C,OAAOwC,EAAKxE,kBAClBwE,EAAKxE,iBAAiBvB,SAASwD,UAC/BuC,EAAKxE,iBAAiBxB,SAASyD,UAC/BuC,EAAKxE,sBAAmBpN,EACxB4R,EAAK1E,qBAAqBc,OAAO,EAAE,EAAE,GAhB7BwG,EAAAnU,KAAA,GAiBduR,EAAKtC,eAAetK,KAAK4M,EAAKrC,cAjBhB,yBAAAiF,EAAAnP,SAAAkP,OAmBZ5C,EAAS8C,MAAMH,GACf1C,EAAK/E,iBAAiBsC,aAAc,EAE7CwC,EAASnC,SAGJ2C,EAAMlE,IAAItK,KAAKmJ,cAGrB,IAAI4H,EAAiB,eAAAC,EAAAlR,OAAAc,EAAA,EAAAd,CAAAe,EAAAC,EAAAC,KAAG,SAAAkQ,EAAOnV,GAAP,OAAA+E,EAAAC,EAAAG,KAAA,SAAAiQ,GAAA,cAAAA,EAAA/P,KAAA+P,EAAAxU,MAAA,OACvBuR,EAAKnF,QAAUmF,EAAKlF,UAAUiD,IAAIlQ,GAAI4R,SAEtCO,EAAK7E,QAAU6E,EAAK5E,OAAOc,KAC1BvB,MAAQ,KAAA/F,OAA8BoL,EAAKnF,QAAQpC,QACnD,WACgBuH,EAAKzE,qBAAuB,IAAIrB,oBAAwB,CACpD7J,IAAK2P,EAAK7E,QACVgB,KAAMjC,eAEV8F,EAAKxE,iBAAmB,IAAItB,OACxB8F,EAAK1E,qBACL0E,EAAKzE,sBAETyE,EAAK1E,qBAAqBc,OAAO,EAAG,EAAG,GACvC4D,EAAKxE,iBAAiBnC,SAASC,EAAI0G,EAAKnF,QAAQrC,YAChD+H,EAAMlE,IAAI2D,EAAKxE,kBAC9B0G,EAAkBrU,GAClBmS,EAAKpI,SAASrG,IAAMyO,EAAKnF,QAAQvH,MAAM/B,IACvCyO,EAAKpI,SAASpG,IAAMwO,EAAKnF,QAAQvH,MAAM9B,IACvCwO,EAAKpI,SAASX,QAAU+I,EAAKnF,QAAQjE,cAEtCxI,EACA,SAAAU,GACCyN,QAAQC,MAAM1N,KAxBO,wBAAAmU,EAAAxP,SAAAuP,MAAH,gBAAAE,GAAA,OAAAH,EAAA3S,MAAA2B,KAAA2B,YAAA,GAiEZmN,EAASG,SAASF,EAAUE,SAASD,EAAUC,SACvDjP,KAAK4L,eAEN,IAAIwF,EAAYjD,mBACZkD,EAAelD,mBACfmD,EAASnD,mBACToD,EAAY,CAAC,IAAIpJ,UAAc,EAAG,EAAG,GAAI,IAAIA,WAAe,IAAM,EAAG,GAAI,IAAIA,UAAc,GAAI,GAAK,GAAI,IAAIA,UAAc,IAAM,EAAG,IAQvI,SAASqJ,EAAmBC,EAAOC,GAAI,IAAAxU,GAAA,EAAAC,GAAA,EAAAC,OAAAf,EAAA,IACtC,QAAAgB,EAAAC,EAAiBmU,EAAjBjV,OAAAC,cAAAS,GAAAG,EAAAC,EAAAZ,QAAAC,MAAAO,GAAA,EAAuB,CAAAG,EAAAR,MAChBoL,SAAS2C,QAAU8G,GAFY,MAAA3U,GAAAI,GAAA,EAAAC,EAAAL,EAAA,YAAAG,GAAA,MAAAI,EAAAN,QAAAM,EAAAN,SAAA,WAAAG,EAAA,MAAAC,IAPnCkU,EAAOrC,UACTqC,EAAOrC,QAAgB0C,SAAWJ,EAClCD,EAAOrC,QAAgB2C,MAAM9U,KAAM,IAAIqL,QAAa,EAAG,EAAG,IAC1DmJ,EAAOrC,QAAgB2C,MAAM9U,KAAM,IAAIqL,QAAa,EAAG,EAAG,IAC1DmJ,EAAOrC,QAAgB4C,qBACvBP,EAAOrC,QAAgB5E,MAAM,GAAK,GAAK,KAQnC,IAAIyH,EAAW3D,mBAqBrB,OApBS2D,EAAS7C,SACP6C,EAAS7C,QAAgB/G,SAASmC,MAAM,EAAE,EAAE,GAGvD0H,YAAU,WACTpJ,GAAMqJ,SACLZ,EAAUnC,QAAgB3M,SAASmL,KAClC,GAAKtB,KAAKI,IAAInF,EAAOE,SAASC,IAC9B,GACA,GAAK4E,KAAKC,IAAIhF,EAAOE,SAASC,IAE/B8J,EAAapC,QAAgB3M,SAASmL,KACrC,GAAKtB,KAAKI,IAAInF,EAAOE,SAASC,EAAE,KAChC,GACA,GAAK4E,KAAKC,IAAIhF,EAAOE,SAASC,EAAE,KAEjC8J,EAAapC,QAAgB3H,SAASC,EAAEH,EAAOE,SAASC,EACxD8J,EAAapC,QAAgB3H,SAAS4E,GAAG9E,EAAOE,SAASC,IAI1DrF,EAAApB,EAAAqB,cAAAD,EAAApB,EAAAmR,SAAA,KACC/P,EAAApB,EAAAqB,cAAA,qBACCW,IAAKoL,EACL5C,IAAK,GACL4E,OAAQD,OAAOiC,WAAajC,OAAOkC,YACnC/G,SAAU,SAAAgH,GAAI,OAAIA,EAAK7G,4BAGxBrJ,EAAApB,EAAAqB,cAAA,SAAOW,IAAKsO,GACXlP,EAAApB,EAAAqB,cAAA,QACCI,QAAS,WACRwO,EAAkB9C,EAAKlE,GAAG2D,SAAS5R,KAEpCuW,cAAe,SAAA7P,GAAOA,EAAE8P,OAAerK,SAAS2C,QAAQ,IACxD2H,aAAc,SAAA/P,GAAOA,EAAE8P,OAAerK,SAAS2C,QAAQ,IACvD9H,IAAKgM,EACL5G,SAAU2G,EAAK3G,UAEfhG,EAAApB,EAAAqB,cAAA,qBAAmBqQ,OAAO,WAAWpK,MAAM,QAAQwC,QAAS,GAAKY,aAAa,KAE/EtJ,EAAApB,EAAAqB,cAAA,QACCI,QAAS,WACRwO,EAAkB9C,EAAKjE,GAAG0D,SAAS5R,KAEpCuW,cAAe,SAAA7P,GAAOA,EAAE8P,OAAerK,SAAS2C,QAAQ,IACxD2H,aAAc,SAAA/P,GAAOA,EAAE8P,OAAerK,SAAS2C,QAAQ,IACrC9H,IAAKiM,EACL7G,SAAU2G,EAAK3G,UAEfhG,EAAApB,EAAAqB,cAAA,qBAAmBqQ,OAAO,WAAWpK,MAAM,QAAQwC,QAAS,GAAKY,aAAa,KAEjGtJ,EAAApB,EAAAqB,cAAA,QACCI,QAAS,WACRwO,EAAkB9C,EAAKhE,GAAGyD,SAAS5R,KAEpCuW,cAAe,SAAA7P,GAAOA,EAAE8P,OAAerK,SAAS2C,QAAQ,IACxD2H,aAAc,SAAA/P,GAAOA,EAAE8P,OAAerK,SAAS2C,QAAQ,IACrC9H,IAAKkM,EACL9G,SAAU2G,EAAK3G,UAEfhG,EAAApB,EAAAqB,cAAA,qBAAmBqQ,OAAO,WAAWpK,MAAM,QAAQwC,QAAS,GAAKY,aAAa,MAclGtJ,EAAApB,EAAAqB,cAAA,SACCI,QAAS,kBAAM0L,EAAKwE,gBAAgBrL,IACpCiL,cAAe,SAAA7P,GAAMgP,EAAmBhP,EAAE8P,OAAOI,SAAU,KAC3DH,aAAc,SAAA/P,GAAMgP,EAAmBhP,EAAE8P,OAAOI,SAAU,KAC1D5P,IAAKuO,GAELnP,EAAApB,EAAAqB,cAAA,QACCG,SAAU,CAAC,EAAG,EAAG,GACjB4F,SAAU,IAAIC,iBAAqB,GAAK,IAAK,IAC7CjG,EAAApB,EAAAqB,cAAA,qBAAmBqQ,OAAO,WAAWpK,MAAM,QAAQwC,QAAS,GAAKY,aAAa,KAE/EtJ,EAAApB,EAAAqB,cAAA,QACCG,SAAU,CAAC,EAAG,IAAM,MAEpBJ,EAAApB,EAAAqB,cAAA,YACCqQ,OAAO,WACP1P,IAAKwO,IAENpP,EAAApB,EAAAqB,cAAA,qBAAmBqQ,OAAO,WAAWpK,MAAM,MAAMwC,QAAS,GAAKY,aAAa,wCAWhF,OAHsBxL,KAAKQ,MAAnBkM,UAIPxK,EAAApB,EAAAqB,cAAA,OAAKwQ,UAAW,qBACfzQ,EAAApB,EAAAqB,cAACyQ,GAAD,CAASrO,MAAO,IAAKC,OAAQ,OAG9BtC,EAAApB,EAAAqB,cAAA,OAAKwQ,UAAU,kBACdzQ,EAAApB,EAAAqB,cAAA,OAAKwQ,UAAU,eACdzQ,EAAApB,EAAAqB,cAAC0Q,EAAA,EAAD,KACC3Q,EAAApB,EAAAqB,cAAAnC,KAAM2M,WAAN,QAGFzK,EAAApB,EAAAqB,cAAA,OAAKwQ,UAAU,WACdzQ,EAAApB,EAAAqB,cAACmE,GAAD,CAAST,SAAU7F,KAAK6F,SAAUD,UAAW5F,KAAK4F,6CA7mBrD,OAAO5F,KAAKJ,MAAMsD,MAAMC,OAAOrH,IAAM,wBAlBpByH,aAsoBNsK,IAAbiF,GAAA,WAGC,SAAAjF,EAAY/R,GAAIgE,OAAAC,EAAA,EAAAD,CAAAE,KAAA6N,GAAA/N,OAAAgF,EAAA,EAAAhF,CAAAE,KAAA,KAAA+S,GAAA/S,MACfA,KAAKlE,GAAGA,EAJV,OAAAgE,OAAAsF,EAAA,EAAAtF,CAAA+N,EAAA,EAAAlL,IAAA,WAAA9F,MAAA,SAMiBf,GACfkE,KAAKlE,GAAGA,MAPV+R,EAAA,GAAAkF,GAAAjT,OAAAuF,EAAA,EAAAvF,CAAAgT,GAAA1U,UAAA,MACEkH,KADF,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,OAAAoN,IAWelP,eAAWiF,IC/pBpBmK,WAAS,CACd,CACCpD,KAAM,eACNqD,MAAO,UAER,CACCrD,KAAM,gBACNqD,MAAO,WAER,CACCrD,KAAM,YACNqD,MAAO,eCrBTC,IAASC,OAAOjR,EAAApB,EAAAqB,cDyBmB,WAClC,OACCD,EAAApB,EAAAqB,cAACiR,EAAA,EAAD,KACClR,EAAApB,EAAAqB,cAACjH,EAAD,KACCgH,EAAApB,EAAAqB,cAAC7G,EAAD,KACE0X,GAAO1U,IAAI,SAAA+U,GAAC,OACZnR,EAAApB,EAAAqB,cAACiR,EAAA,EAAD,CACCrI,GAAIsI,EAAEzD,KACNjN,IAAK0Q,EAAEzD,KACP0D,gBAAgB,sBAChBX,UAAU,eAETU,EAAEJ,UAIN/Q,EAAApB,EAAAqB,cAAC3G,EAAD,KACC0G,EAAApB,EAAAqB,cAACoR,EAAA,EAAD,KACCrR,EAAApB,EAAAqB,cAACoR,EAAA,EAAD,CAAO3D,KAAK,gBAAgB4D,UAAWC,IADxC,MAECvR,EAAApB,EAAAqB,cAACoR,EAAA,EAAD,CAAOG,OAAO,EAAM9D,KAAK,gBAAgB4D,UAAW3K,KACpD3G,EAAApB,EAAAqB,cAACoR,EAAA,EAAD,CAAO3D,KAAK,YAAY4D,UAAW3K,KACnC3G,EAAApB,EAAAqB,cAACoR,EAAA,EAAD,CAAUG,OAAK,EAACC,KAAK,IAAI5I,GAAG,sBC9ClB,MAAmB7G,SAAS0P,eAAe,iqHCL3D,IAAAtV,EAAA,CACAuV,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,IACAC,+BAAA,KAIA,SAAAC,EAAAC,GACA,IAAA1Z,EAAA2Z,EAAAD,GACA,OAAAxa,EAAAc,GAEA,SAAA2Z,EAAAD,GACA,IAAAxa,EAAA0a,EAAApX,EAAAkX,GAAA,CACA,IAAAhT,EAAA,IAAAmT,MAAA,uBAAAH,EAAA,KAEA,MADAhT,EAAAoT,KAAA,mBACApT,EAEA,OAAAlE,EAAAkX,GAEAD,EAAAxJ,KAAA,WACA,OAAAjM,OAAAiM,KAAAzN,IAEAiX,EAAA5W,QAAA8W,EACA3a,EAAAC,QAAAwa,EACAA,EAAAzZ,GAAA","file":"static/js/main.3e4614ef.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/pano-20190724143458-mx.072de3d6.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724143833-mx.0732614b.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724145944-mx.0c7531e1.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724150711-mx.f67813cf.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724151238-mx.3f9e7726.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724151553-mx.c1e8bceb.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925110216-mx.15966b2a.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925110449-mx.5b18415f.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925110659-mx.a9cd19bd.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111017-mx.d1eacec2.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111251-mx.3a2748ab.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111418-mx.80a5715d.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111628-mx.c890f6ed.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111907-mx.f5896ac6.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112004-mx.7f51a340.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112226-mx.a1e5bd11.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112242-mx.4589189c.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112410-mx.5e375cce.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112418-mx.f8ad88bb.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112754-mx.e2a0bfca.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112757-mx.702d7268.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112929-mx.dad914bf.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112944-mx.fdd79d67.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925113109-mx.1c1e94e1.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925113249-mx.798912fc.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925113346-mx.0775a445.png\";","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const NAV_BAR_HEIGHT = 64;\r\nexport const NAV_BAR_PADDING = 12;\r\n\r\nexport const Container = styled.div`\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n`;\r\n\r\nexport const Header = styled.div`\r\n\tposition: fixed;\r\n\tz-index: 999;\r\n\ttop: 0;\r\n\tpadding: ${NAV_BAR_PADDING}px;\r\n\theight: calc(${NAV_BAR_HEIGHT}px - ${NAV_BAR_PADDING}px * 2);\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\talign-items: center;\r\n\tbackground-color: #f8f8f8;\r\n\twidth: 100%;\r\n\r\n\t& .ir-nav-item {\r\n\t\tmargin-right: 1rem;\r\n\t\ttext-decoration: none;\r\n\t\tcolor: rgba(0, 0, 0, 0.6);\r\n\t}\r\n\r\n\t& .ir-nav-item__active {\r\n\t\tcolor: #ea6c2f;\r\n\t}\r\n`;\r\n\r\nexport const Content = styled.div`\r\n\tflex: 1;\r\n\tpadding: 24px;\r\n\tpadding-top: ${NAV_BAR_HEIGHT + 24}px;\r\n`;\r\n","import axios from 'axios'\r\nimport mockedPanos from '../mocks/panos.json'\r\nimport mockedNeighbors from '../mocks/neighbors.json'\r\n\r\n/*\r\nconst hostname = \"localhost\";\r\nconst port = \"8080\";\r\nconst url = 'http://' + hostname + ':' + port + '/api';\r\n\r\nconst api = axios.create({\r\n    baseURL: url,\r\n})\r\n\r\nexport const insertPano = payload => api.post(`/pano`, payload)\r\nexport const getAllPanos = () => api.get(`/panos/all`)\r\nexport const deletePanoById = id => api.delete(`/pano/${id}`)\r\nexport const getPanoById = id => api.get(`/pano/${id}`)\r\n\r\nexport const getPanoCoordById = (id) => api.get(`/pano/coord/${id}`)\r\nexport const getPanoFileNameById = id => api.get(`/pano/fname/${id}`)\r\nexport const getPanoAllAttrById = (id) => api.get(`/pano/allAttr/${id}`)\r\nexport const updateCalibrationById = (id, payload) => api.put(`/pano/cal/${id}`, payload)\r\n*/\r\n\r\nfunction getDataFromJSONArray(data, query, id?){\r\n    if(!id){//case when api resembles to 'getAllBlaBlah'\r\n        for(var i=0; i<data.length; i++){\r\n            var resultArr = [];\r\n            for(let param of query){\r\n                resultArr.push(data[i][param]);\r\n            }\r\n            return resultArr;\r\n        }\r\n    }\r\n    for(var i=0; i<data.length; i++){//case when api resembles \"getBlahBlahById\"\r\n        if(data[i][\"id\"]===id){\r\n            if(query.length===0)//case specific for \"getAllAttrById\"\r\n                return data[i];\r\n            var result = {};\r\n            for(let param of query){\r\n                result[param]=data[i][param];\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n}\r\n\r\nfunction getMatrixNeighbors(){\r\n//used for getting irregular neighbor hood neighbors\r\n}\r\n\r\nfunction getNeighbors(id, nhood){\r\n    if(Array.isArray(nhood)){//in the case of a junction\r\n        var result = [];\r\n        for(let hood of nhood){\r\n            let arr = getTwoNeighbors(id,mockedNeighbors[hood]);\r\n            Array.prototype.push.apply(result, arr);\r\n        }\r\n        return result;\r\n    }else{ //linear or circular\r\n        let arr = getTwoNeighbors(id, mockedNeighbors[nhood]);\r\n        return arr;\r\n    }\r\n}\r\n\r\nfunction getTwoNeighbors(id, hood){\r\n    if(hood.map.length<2){\r\n        return [];\r\n    }\r\n    switch (hood.type) {\r\n        case \"linear\":\r\n            for (var i = 0; i < hood.map.length; i++) {\r\n                if (id === hood.map[i]) {\r\n                    if (i === 0) //first one, return second as neighbor\r\n                        return [hood.map[1]];\r\n                    else if (i === hood.map.length - 1) //last one, return the second to the last as neighbor \r\n                        return [hood.map[hood.map.length - 2]];\r\n                    //Otherwise, return the neighboring two\r\n                    return [hood.map[i - 1], hood.map[i + 1]];\r\n                }\r\n            }\r\n            break;\r\n\r\n        case \"circular\":\r\n            for (var i = 0; i < hood.map.length; i++) {\r\n                if (id === hood.map[i]) {\r\n                    if (i === 0) //first one, return last and second as neighbor\r\n                        return [hood.map[1], hood.map[hood.map.length-1]];\r\n                    else if (i === hood.map.length - 1) //last one, return the second to the last and first as neighbor \r\n                        return [hood.map[hood.map.length - 2], hood.map[0]];\r\n                    //Otherwise, return the neighboring two\r\n                    return [hood.map[i - 1], hood.map[i + 1]];\r\n                }\r\n            }\r\n            break;\r\n\r\n        case \"irregular\":\r\n            return hood.map[id];\r\n    }\r\n    \r\n    \r\n}\r\n\r\n// Should use superagent to mock when we have time\r\nexport const getPanoCoordById = (id) => Promise.resolve({ data: { data: getDataFromJSONArray(mockedPanos,[\"coord\"], id) } })\r\n//export const getAllPanoIdAndCoord = () => Promise.resolve({ data: { data: getDataFromJSON(mockedPanos,[\"id\", \"coord\"]) } })\r\nexport const getAllPanoIdAndCoord = () => Promise.resolve({ data: { data: mockedPanos } })\r\nexport const getPanoAllAttrById = (id) => Promise.resolve({ data: { data: getDataFromJSONArray(mockedPanos,[], id) } })\r\nexport const getPanoFileNameById = (id) => Promise.resolve({ data: { data:  getDataFromJSONArray(mockedPanos,[\"filename\"], id) } })\r\nexport const getNeighborsById = (id, neighborhood) => Promise.resolve({ data: { data: getNeighbors(id, neighborhood) } })\r\n\r\nconst apis = {\r\n    //insertPano,\r\n    //getAllPanos,\r\n    //deletePanoById,\r\n    //getPanoById,\r\n    //updateCalibrationById,\r\n\r\n    getPanoFileNameById,\r\n    getPanoCoordById,\r\n    getAllPanoIdAndCoord,\r\n    getPanoAllAttrById,\r\n    getNeighborsById\r\n}\r\n\r\nexport default apis","import React, { Component, useRef } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Map, GoogleApiWrapper, Marker } from \"google-maps-react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nimport api from \"./api/index\";\r\n\r\n// I believe there is a bug of google-maps-react\r\n// as it does not respect the custom style object you pass\r\n// in. So we have to use important for now\r\n// TODO:\r\n// look for better map candidate\r\nconst StyledMap = styled(Map)`\r\n\twidth: 100% !important;\r\n\theight: 100% !important;\r\n\tposition: relative !important;\r\n`;\r\n\r\nconst Container = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\r\n\t& > div {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n`;\r\n\r\nconst regions = {\r\n\t\"boston\":{\r\n\t\tlat:42.36, lng:-71.053\r\n\t},\r\n\t\"concord\":{\r\n\t\tlat: 42.45955, lng: -71.3525\r\n\t}\r\n}\r\n\r\nexport interface Coordinate {\r\n\tid: string | number;\r\n\tlat: number;\r\n\tlng: number;\r\n}\r\nexport interface MapContainerState {\r\n\tshowComp: boolean;\r\n\tcoords?: Coordinate[];\r\n}\r\n\r\nexport interface MapContainerProps extends RouteComponentProps<{ region?: string} > {}\r\n\r\nclass MapContainer extends Component<MapContainerProps, MapContainerState> {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tshowComp: false\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tvar getAllPanoCoords = async () => {\r\n\t\t\tawait api.getAllPanoIdAndCoord().then(result => {\r\n\t\t\t\tvar coordArr = [];\r\n\t\t\t\tlet data = result.data.data;\r\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\tcoordArr.push({\r\n\t\t\t\t\t\tid: data[i].id,\r\n\t\t\t\t\t\tlat: data[i].coord.lat,\r\n\t\t\t\t\t\tlng: data[i].coord.lng\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcoords: coordArr,\r\n\t\t\t\t\tshowComp: true\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t};\r\n\t\tgetAllPanoCoords();\r\n\t}\r\n\r\n\tshowComponent(i) {\r\n\t\tif (i !== true && i !== false) return;\r\n\t\tthis.setState({ showComp: i });\r\n\t}\r\n\r\n\tbounds = new (this.props as any).google.maps.LatLngBounds();\r\n\r\n\tsetBounds() {\r\n\t\tfor (var i = 0; i < (this.state as any).coords.length; i++) {\r\n\t\t\tlet coord = (this.state as any).coords[i];\r\n\t\t\tthis.bounds.extend(\r\n\t\t\t\tnew (this.props as any).google.maps.LatLng({\r\n\t\t\t\t\tlat: coord.lat,\r\n\t\t\t\t\tlng: coord.lng\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\taddMarkers() {\r\n\t\tthis.setBounds();\r\n\t\t//let map = new Map(this.refs.map,);\r\n\t\t//(this.props as any).google.maps.fitBounds(this.bounds);\r\n\t\treturn (this.state as any).coords.map((coord, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<Marker\r\n\t\t\t\t\tlid={coord.id}\r\n\t\t\t\t\tposition={{\r\n\t\t\t\t\t\tlat: coord.lat,\r\n\t\t\t\t\t\tlng: coord.lng\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\tthis.showComponent(false);\r\n\t\t\t\t\t\treturn this.gotoPano(e.lid);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tkey={coord.id}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t});\r\n    }\r\n    \r\n\tgotoPano(id) {\r\n\t\t// @ts-ignore\r\n\t\tthis.props.history.push(`/viewPano/${id}`);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { showComp } = this.state;\r\n\t\treturn showComp ? (\r\n\t\t\t<StyledMap\r\n\t\t\t\tref={(this.props as any).onMapMounted}\r\n\t\t\t\tgoogle={(this.props as any).google}\r\n\t\t\t\tzoom={18}\r\n\t\t\t\tcenter={regions[this.props.match.params.region]}\r\n\t\t\t\tinitialCenter={{ lat: 42.45955, lng: -71.3525 }}\r\n\t\t\t\tbounds={this.bounds}\r\n\t\t\t>\r\n\t\t\t\t{this.addMarkers()}\r\n\t\t\t</StyledMap>\r\n\t\t) : null;\r\n\t}\r\n}\r\n\r\nconst EnhancedMap = GoogleApiWrapper({\r\n\tapiKey: `${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}`\r\n})(withRouter(MapContainer));\r\n\r\n// google-maps-react is making an higher-order-component\r\n// in a stupid way, as there is no way for us to change\r\n// the container tag (always div), and the container does not\r\n// accept className prop, which makes it hard for us to style\r\nexport default props => (\r\n\t<Container>\r\n\t\t<EnhancedMap {...props} />\r\n\t</Container>\r\n);\r\n","import React, { Component, useRef } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Map, GoogleApiWrapper, Marker } from \"google-maps-react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport { observable } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport { PanoStore } from \"./pano\";\r\nimport api from \"./api/index\";\r\n\r\nconst StyledMap = styled(Map)`\r\n\twidth: 100% !important;\r\n\theight: 100% !important;\r\n\tposition: relative !important;\r\n`;\r\n\r\nconst Container = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\r\n\t& > div {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n`;\r\n\r\nvar minimapElement;\r\nvar mapHandlerInit = () => {\r\n\tminimapElement = (document.getElementsByClassName('Minimap') as HTMLCollectionOf<HTMLElement>)[0];\r\n\t//console.log(minimapElement[0]);\r\n\tminimapElement.addEventListener(\"mouseover\", e => minimapZoomIn(e), false);\r\n\tminimapElement.addEventListener(\"mouseout\", e => minimapZoomOut(e), false);\r\n}\r\nfunction minimapZoomIn(e){\r\n\te.preventDefault();\r\n\tminimapElement.style.width = \"250px\";\r\n\tminimapElement.style.height = \"200px\";\r\n}\r\n\r\nfunction minimapZoomOut(e){\r\n\te.preventDefault();\r\n\tminimapElement.style.width = \"200px\";\r\n\tminimapElement.style.height = \"100px\";\r\n}\r\n\r\nexport interface Coordinate {\r\n\tid: string | number;\r\n\tlat: number;\r\n\tlng: number;\r\n}\r\nexport interface MapContainerState {\r\n\tshowComp: boolean;\r\n\tcoords?: Coordinate[];\r\n\tmapStore?: MapStore;\r\n}\r\n\r\ntype center = {\r\n\tlng: string,\r\n\tlat: string,\r\n\tbearing: string\r\n}\r\n\r\nexport interface MapContainerProps extends RouteComponentProps<{MapStore}> {}\r\n\r\nexport class MapStore {\r\n\t@observable lng:number;\r\n\t@observable lat:number;\r\n\t@observable bearing:number;\r\n\r\n\tconstructor(lat, lng, cameraY){\r\n\t\tthis.lng = lng;\r\n\t\tthis.lat = lat;\r\n\t\tthis.bearing = this.cameraYtoAbsRadian( cameraY );\r\n\t}\r\n\r\n\tupdateValues(lat, lng, cameraY){\r\n\t\tthis.lng = lng;\r\n\t\tthis.lat = lat;\r\n\t\tthis.bearing = this.cameraYtoAbsRadian( cameraY );\r\n\t}\r\n\r\n\tcameraYtoAbsRadian(cameraY){\r\n\t\treturn cameraY\r\n\t}\r\n} \r\n\r\n\r\n@observer\r\nclass MapContainer extends Component<MapContainerProps, MapContainerState> {\r\n\t\r\n\tpanoStore:PanoStore;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tshowComp: false,\r\n\t\t\tmapStore: (this.props as any).mapStore\r\n\t\t};\r\n\t\tthis.panoStore = (this.props as any).panoStore;\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tvar getAllPanoCoords = async () => {\r\n\t\t\tawait api.getAllPanoIdAndCoord().then(result => {\r\n\t\t\t\tvar coordArr = [];\r\n\t\t\t\tlet data = result.data.data;\r\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\tcoordArr.push({\r\n\t\t\t\t\t\tid: data[i].id,\r\n\t\t\t\t\t\tlat: data[i].coord.lat,\r\n\t\t\t\t\t\tlng: data[i].coord.lng\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcoords: coordArr,\r\n\t\t\t\t\tshowComp: true\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t};\r\n\t\tgetAllPanoCoords();\r\n\t}\r\n\r\n\tshowComponent(i) {\r\n\t\tif (i !== true && i !== false) return;\r\n\t\tthis.setState({ showComp: i });\r\n\t}\r\n\r\n\tbounds = new (this.props as any).google.maps.LatLngBounds();\r\n\r\n\tsetBounds() {\r\n\t\tfor (var i = 0; i < (this.state as any).coords.length; i++) {\r\n\t\t\tlet coord = (this.state as any).coords[i];\r\n\t\t\tthis.bounds.extend(\r\n\t\t\t\tnew (this.props as any).google.maps.LatLng({\r\n\t\t\t\t\tlat: coord.lat,\r\n\t\t\t\t\tlng: coord.lng\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\taddMarkers() {\r\n\t\tthis.setBounds();\r\n\t\t//let map = new Map(this.refs.map,);\r\n\t\t//(this.props as any).google.maps.fitBounds(this.bounds);\r\n\t\treturn (this.state as any).coords.map((coord, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<Marker\r\n\t\t\t\t\tlid={coord.id}\r\n\t\t\t\t\tposition={{\r\n\t\t\t\t\t\tlat: coord.lat,\r\n\t\t\t\t\t\tlng: coord.lng\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\treturn this.gotoPano(e.lid);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tkey={coord.id}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t});\r\n    }\r\n\t\r\n\tgotoPano(id) {\r\n\t\t// @ts-ignore\r\n\t\t//this.props.history.push(`/viewPano/${id}`);\r\n\t\t//console.log(\"Update id: \"+id);\r\n\t\tthis.panoStore.id = id;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { showComp, mapStore } = this.state;\r\n\r\n\t\treturn showComp ? (\r\n\t\t\t<StyledMap\r\n\t\t\t\tref={(this.props as any).onMapMounted}\r\n\t\t\t\tgoogle={(this.props as any).google}\r\n\t\t\t\tzoom={16}\r\n\t\t\t\tcenter={{ lat: mapStore.lat, lng: mapStore.lng }}\r\n\t\t\t\tinitialCenter={{ lat: mapStore.lat, lng: mapStore.lng}}\r\n\t\t\t\tbounds={this.bounds}\r\n\t\t\t\tonReady={mapHandlerInit}\r\n\t\t\t\tstreetViewControl={false}\r\n\t\t\t\tfullscreenControl={false}\r\n\t\t\t\tmapTypeControl={false}\r\n\t\t\t\trotateControl={false}\r\n\t\t\t>\r\n\t\t{ this.addMarkers() }\r\n\t\t\t</StyledMap>\r\n\t\t) : null;\r\n\t}\r\n}\r\n\r\nconst Minimap = GoogleApiWrapper({\r\n\tapiKey: `${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}`\r\n})(withRouter(MapContainer));\r\n\r\nexport default props => (\r\n\t<Container>\r\n\t\t<Minimap {...props} />\r\n\t</Container>\r\n);\r\n","import * as geolib from 'geolib'\r\nimport api from './api/index'\r\n\r\nclass Location {\r\n    //Members\r\n    coord: {\r\n        lat: number,\r\n        lng: number\r\n    } = { lat: 0, lng: 0 }\r\n    calibration: number = 0.0;\r\n    id: string;\r\n    fname: string = \"\";\r\n    neighborhood: string = \"\";\r\n    neighborArr\r\n    cameraY\r\n\r\n    //Methods\r\n    constructor(id: string) {\r\n        this.id = id;\r\n    }\r\n\r\n    setAllAttr = async () => {\r\n        await api.getPanoAllAttrById(this.id).then(result => {\r\n            this.fname = result.data.data.filename;\r\n            this.coord.lat = result.data.data.coord.lat;\r\n            this.coord.lng = result.data.data.coord.lng;\r\n            this.calibration = result.data.data.calibration;\r\n            this.neighborhood = result.data.data.neighborhood;\r\n        })\r\n    }\r\n\r\n    getNeighborIds = async () => {\r\n        await api.getNeighborsById(this.id, this.neighborhood).then(result => {\r\n            this.neighborArr = result.data.data;\r\n        })\r\n    }\r\n\r\n    getDistanceTo(loc: Location){\r\n        return geolib.getDistance(this.coord,loc.coord);\r\n    }\r\n\r\n    getDistanceToNeighbors(neighbor: Location[]) {\r\n        return neighbor.map(this.getDistanceTo);\r\n    }\r\n\r\n    getBearingTo(loc: Location) {\r\n        return geolib.getRhumbLineBearing(this.coord, loc.coord);\r\n    }\r\n\r\n    getBearingToNeighbors(neighbor: Location[]) {\r\n        return neighbor.map(this.getBearingTo);\r\n    }\r\n\r\n    updateCalibration = async (camera) => {\r\n        const payload = {\r\n            \"calibration\": -camera.rotation.y\r\n        }\r\n        //await api.updateCalibrationById(this.id,payload).then(res=>{\r\n        alert(\"Update Calibration is disabled at this moment!\");\r\n        //})\r\n    }\r\n}\r\n\r\nexport { Location }\r\n","import * as THREE from \"three\"\r\n\r\nclass Cylinder{\r\n    //Members\r\n    mesh: THREE.Mesh;\r\n    material: THREE.MeshBasicMaterial;\r\n    geometry: THREE.CylinderBufferGeometry;\r\n    texture: THREE.Texture;\r\n    loader: THREE.TextureLoader;\r\n\r\n    constructor(){\r\n        this.geometry = new THREE.CylinderBufferGeometry(20, 20, 15, 100, 1, true);\r\n        this.texture = new THREE.Texture();\r\n        this.loader = new THREE.TextureLoader();\r\n        this.material = new THREE.MeshBasicMaterial();\r\n        this.mesh = new THREE.Mesh(this.geometry, this.material);\r\n    }\r\n    \r\n    LoadPanoTexture(fname:string, onComplete:Function){\r\n        this.texture = this.loader.load(process.env.PUBLIC_URL + 'resource/'+fname, undefined, undefined, err => {\r\n            console.error(err)\r\n        });\r\n    }\r\n}\r\n\r\nclass Arrow{\r\n    //Members\r\n    mesh: THREE.Mesh;\r\n    material: THREE.MeshBasicMaterial;\r\n    geometry: THREE.ConeBufferGeometry;\r\n    id: string\r\n\r\n    constructor(){\r\n        this.geometry = new THREE.ConeBufferGeometry(0.2,1,16);\r\n        this.material = new THREE.MeshBasicMaterial({color:\"white\"})\r\n        this.mesh = new THREE.Mesh(this.geometry,this.material);\r\n    }\r\n    onClickHandler(){\r\n        \r\n    }\r\n\r\n}\r\n\r\nexport{Arrow, Cylinder}\r\n\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Rings = styled.div`\r\n\t&,\r\n\t&:after {\r\n\t\tborder-radius: 50%;\r\n\t\twidth: ${({ width = \"48\" }) => width}px;\r\n\t\theight: ${({ width = \"48\" }) => width}px;\r\n\t}\r\n\t& {\r\n\t\tmargin: 60px auto;\r\n\t\tfont-size: 10px;\r\n\t\tposition: relative;\r\n\t\ttext-indent: -9999em;\r\n\t\tborder-top: 1.1em solid rgba(0, 0, 0, 0.1);\r\n\t\tborder-right: 1.1em solid rgba(0, 0, 0, 0.1);\r\n\t\tborder-bottom: 1.1em solid rgba(0, 0, 0, 0.1);\r\n\t\tborder-left: 1.1em solid ${({ color = \"#ea6c2f\" }) => color};\r\n\t\t-webkit-transform: translateZ(0);\r\n\t\t-ms-transform: translateZ(0);\r\n\t\ttransform: translateZ(0);\r\n\t\t-webkit-animation: load8 1.1s infinite linear;\r\n\t\tanimation: load8 1.1s infinite linear;\r\n\t}\r\n\t@-webkit-keyframes load8 {\r\n\t\t0% {\r\n\t\t\t-webkit-transform: rotate(0deg);\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\t-webkit-transform: rotate(360deg);\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\t@keyframes load8 {\r\n\t\t0% {\r\n\t\t\t-webkit-transform: rotate(0deg);\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\t-webkit-transform: rotate(360deg);\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport default Rings;\r\n","import React, { Component, useRef } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { Canvas, useThree, useRender } from \"react-three-fiber\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//import SVGLoader from \"three-svg-loader\";\r\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\r\n\r\nimport \"./style/pano.css\";\r\nimport Minimap, {MapStore} from \"./minimap\"\r\nimport { Location } from \"./geo\";\r\nimport { Arrow, Cylinder } from \"./shapes\";\r\nimport Spinner from \"./components/spinner\";\r\nimport { observable, autorun, reaction } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\n//import OrbitControls from 'three-orbitcontrols'\r\n\r\nconst TWEEN = require(\"@tweenjs/tween.js\");\r\n\r\ninterface PanoProps extends RouteComponentProps<{ id?: string, position? }> {\r\n\tlid: string;\r\n}\r\n\r\ntype PanoState = { isLoading: boolean };\r\ntype NeighborType = {\r\n\tlocation: Location;\r\n\tdistance: number;\r\n\tbearing: number;\r\n};\r\n\r\nclass Pano extends Component<PanoProps, PanoState> {\r\n\t//Members\r\n\tcurrLoc: Location;\r\n\tneighbors: Map<string, NeighborType>;\r\n\tmapStore = undefined;\r\n\tpanoStore = undefined;\r\n\tpanoIdChangeReaction;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisLoading: true\r\n\t\t};\r\n\t\tthis.RenderPano = this.RenderPano.bind(this);\r\n\t}\r\n\t\r\n\tget panoId() {\r\n\t\t// @ts-ignore\r\n\t\treturn this.props.match.params.id || \"20190724143833\";\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdisableBodyScroll(document.querySelector('#interface'));\r\n\t\tvar setCurrLocAndNeighbors = async () => {\r\n\t\t\t//setCurrLoc\r\n\t\t\tthis.currLoc = new Location(this.panoId);\r\n\t\t\tawait this.currLoc.setAllAttr().then(() => {\r\n\t\t\t\tthis.loadTexture();\r\n\t\t\t});\r\n\t\t\t//setNeighbors\r\n\t\t\tthis.neighbors = new Map();\r\n\t\t\tthis.setNeighbors();\r\n\t\t};\r\n\t\tsetCurrLocAndNeighbors();\r\n\t}\r\n\r\n\tasync setNeighbors() {//Only supports two neighbors for now\r\n        this.neighbors.clear();//Purge previous neighbors\r\n\t\tawait this.currLoc.getNeighborIds();\r\n\t\tlet nidArr = this.currLoc.neighborArr;\r\n\t\tif((nidArr as any).length===0){\r\n\t\t\tconsole.log(\"No neighbors discorvered...\");\r\n\t\t\treturn ;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tfor(let nid of nidArr as any){\r\n\t\t\t\tlet nextLoc = new Location(nid);\r\n\t\t\t\tawait nextLoc.setAllAttr().then(() => {\r\n\t\t\t\t\tthis.addNeighbor(nextLoc);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddNeighbor(n: Location) {\r\n\t\tthis.neighbors.set(n.id, {\r\n\t\t\tlocation: n,\r\n\t\t\tdistance: this.currLoc.getDistanceTo(n),\r\n\t\t\tbearing: this.currLoc.getBearingTo(n)\r\n\t\t});\r\n\t}\r\n\r\n\t//THREEjs objects\r\n\tcylindergeometry = new THREE.CylinderBufferGeometry(20, 20, 15, 100, 1, true);\r\n\tcylindermaterial = undefined;\r\n\tcylindermesh = undefined;\r\n\ttexture = undefined;\r\n\tloader = new THREE.TextureLoader();\r\n\tlines = [];\r\n\t\r\n    tempcylindergeometry = new THREE.CylinderBufferGeometry(21, 21, 15, 100, 1, true);\r\n\ttempcylindermaterial = undefined;\r\n\ttempcylindermesh = undefined;\r\n\tthreeCamera = undefined;\r\n\tthreeScene = undefined;\r\n\r\n\tcone0:THREE.Mesh;\r\n\tcone1:THREE.Mesh;\r\n\tcone2:THREE.Mesh;\r\n\r\n\t//Neighbors\r\n\tn0:NeighborType;\r\n\tn1:NeighborType;\r\n\tn2:NeighborType;\r\n\r\n\t\r\n\r\n\tloadTexture() {\r\n\t\tthis.texture = this.loader.load(\r\n\t\t\trequire(`./assets/viewPano/resource/${this.currLoc.fname}`),\r\n\t\t\t() => {\r\n\t\t\t\tthis.mapStore = new MapStore(this.currLoc.coord.lat, this.currLoc.coord.lng, 0.0);\r\n\t\t\t\tthis.panoStore = new PanoStore(this.currLoc.id);\r\n\t\t\t\tthis.panoIdChangeReaction = reaction(\r\n\t\t\t\t\t() => this.panoStore.id,\r\n\t\t\t\t\t(id, reaction) => {\r\n\t\t\t\t\t\t//console.log(this.panoStore);\r\n\t\t\t\t\t\tthis.teleportToScene(id);\r\n\t\t\t\t\t\t//reaction.dispose();\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tthis.setState({ isLoading: false });\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\terr => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tthis.cylindermaterial = new THREE.MeshBasicMaterial({\r\n\t\t\tmap: this.texture,\r\n\t\t\tside: THREE.DoubleSide\r\n\t\t});\r\n\t\tthis.cylindermesh = new THREE.Mesh(\r\n\t\t\tthis.cylindergeometry,\r\n\t\t\tthis.cylindermaterial\r\n\t\t);\r\n\t\tthis.cylindergeometry.scale(-1, 1, 1);\r\n\t\t//this.cylindermesh.position.y = 0\r\n        this.cylindermesh.rotation.y = this.currLoc.calibration;\r\n\t}\r\n\t\r\n\r\n\t/*\r\n\tInitNeighborPins() {\r\n\t\tconsole.log(this.lines);\r\n\t\tif (this.lines.length !== 0) {\r\n\t\t\tthis.lines = [];\r\n\t\t}\r\n\t\tthis.neighbors.forEach((loc, id) => {\r\n\t\t\tlet bearing = loc.bearing;\r\n\t\t\tlet line = new THREE.LineBasicMaterial({ color: \"blue\" });\r\n\t\t\tlet geometry = new THREE.Geometry();\r\n\t\t\tgeometry.vertices.push(new THREE.Vector3(0, -5, 0));\r\n\t\t\tgeometry.vertices.push(\r\n\t\t\t\tnew THREE.Vector3(\r\n\t\t\t\t\t20 * Math.sin((bearing * Math.PI) / 180),\r\n\t\t\t\t\t-5,\r\n\t\t\t\t\t-20 * Math.cos((bearing * Math.PI) / 180)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tthis.lines.push(new THREE.Line(geometry, line));\r\n\t\t});\r\n\t}*/\r\n\r\n\tCameraLookNorth(camera) {\r\n\t\tvar rotBegin = {\r\n\t\t\tat: camera.rotation.y\r\n\t\t};\r\n\t\tvar rotEnd = {\r\n\t\t\tat: 0\r\n\t\t};\r\n\t\tvar tweenRot = new TWEEN.Tween(rotBegin)\r\n\t\t\t.to(rotEnd, 750)\r\n\t\t\t.easing(TWEEN.Easing.Quadratic.InOut);\r\n\t\ttweenRot.onUpdate(function() {\r\n\t\t\tcamera.rotation.y = rotBegin.at;\r\n\t\t});\r\n\t\ttweenRot.onComplete(() => {\r\n\t\t\tcamera.rotation.y = 0;\r\n\t\t});\r\n\t\ttweenRot.start();\r\n\t}\r\n\r\n\tteleportToScene = async (id) => {\r\n\t\t//console.log(\"Teleporting to: \"+id);\r\n\t\tthis.currLoc = new Location(id);\r\n\t\tawait this.currLoc.setAllAttr().then(()=>{\r\n\t\t\tthis.texture = this.loader.load(\r\n\t\t\t\trequire(`./assets/viewPano/resource/${this.currLoc.fname}`),\r\n\t\t\t\t() => {//onComplete\r\n\t\t\t\t\tthis.tempcylindermaterial = new THREE.MeshBasicMaterial({\r\n\t\t\t\t\t\tmap: this.texture,\r\n\t\t\t\t\t\tside: THREE.DoubleSide\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.tempcylindermesh = new THREE.Mesh(\r\n\t\t\t\t\t\tthis.tempcylindergeometry,\r\n\t\t\t\t\t\tthis.tempcylindermaterial\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempcylindergeometry.scale(-1, 1, 1);\r\n\t\t\t\t\tthis.tempcylindermesh.rotation.y = this.currLoc.calibration;\r\n\t\t\t\t\tthis.threeScene.add(this.tempcylindermesh);\r\n\t\t\t\t\tthis.animateTeleportationTextureFade();\r\n\t\t\t\t\tthis.mapStore.lat = this.currLoc.coord.lat; \r\n\t\t\t\t\tthis.mapStore.lng = this.currLoc.coord.lng;\r\n\t\t\t\t\tthis.mapStore.bearing = this.currLoc.cameraY;\r\n\t\t\t\t},\r\n\t\t\t\tundefined,\r\n\t\t\t\terr => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tanimateTeleportationTextureFade = () => {\r\n\t\tvar fadeBegin = {\r\n\t\t\tat: this.cylindermaterial.opacity\r\n\t\t};\r\n\t\tvar fadeEnd = {\r\n\t\t\tat: 0.1\r\n\t\t};\r\n\t\tvar crossfade = new TWEEN.Tween(fadeBegin)\r\n\t\t\t.to(fadeEnd, 500)\r\n\t\t\t.easing(TWEEN.Easing.Quadratic.InOut);\r\n\t\tcrossfade.onUpdate(() => {\r\n\t\t\t//console.log(this.cylindermaterial);\r\n\t\t\tthis.cylindermaterial.opacity = fadeBegin.at;\r\n\t\t});\r\n\t\tcrossfade.onComplete( async () => {\r\n\t\t\t//reset camera zoom and pos\r\n\t\t\tthis.threeCamera.rotation.y = 0;\r\n\t\t\t(this.threeCamera as any).fov = 40;\r\n\t\t\t(this.threeCamera as any).updateProjectionMatrix();\r\n\t\t\t//When animations are completed, textures are swapped\r\n\t\t\t\r\n\t\t\tthis.cylindermaterial.map = this.texture;\r\n\t\t\tthis.cylindermesh.rotation.y = this.currLoc.calibration;\r\n\t\t\tthis.cylindermaterial.transparent = false;\r\n\t\t\tthis.cylindermaterial.opacity = 1.0;\r\n\r\n\t\t\tthis.threeScene.remove(this.tempcylindermesh);\r\n\t\t\tthis.tempcylindermesh.geometry.dispose();\r\n\t\t\tthis.tempcylindermesh.material.dispose();\r\n\t\t\tthis.tempcylindermesh = undefined;\r\n\t\t\tthis.tempcylindergeometry.scale(-1,1,1);\r\n\t\t\tawait this.setNeighbors().then(this.RenderArrows);\r\n\t\t});\r\n\t\tthis.cylindermaterial.transparent = true;\r\n\t\tcrossfade.start();\r\n\t}\r\n\r\n\tRenderArrows = () => {\r\n\t\tvar iter = this.neighbors.keys();\r\n\t\t//iter.next();\r\n\t\tthis.n0 = this.neighbors.get(iter.next().value);\r\n\t\tconsole.log(this.currLoc.id);\r\n\t\t//position\r\n\t\tthis.cone0.position.z = -Math.cos(this.n0.bearing * Math.PI / 180);\r\n\t\tthis.cone0.position.x = Math.sin(this.n0.bearing * Math.PI / 180);\r\n\t\t//rotation\r\n\t\tthis.cone0.rotation.x = -1.5708;\r\n\t\tthis.cone0.rotation.z = (-this.n0.bearing) * Math.PI / 180;\r\n\t\tthis.cone1.visible = false;\r\n\t\tthis.cone2.visible = false;\r\n\t\tif(this.neighbors.size>1){\r\n\t\t\tthis.n1 = this.neighbors.get(iter.next().value);\r\n\t\t\tthis.cone1.visible = true;\r\n\t\t\t//position\r\n\t\t\tthis.cone1.position.z = -Math.cos(this.n1.bearing * Math.PI / 180);\r\n\t\t\tthis.cone1.position.x = Math.sin(this.n1.bearing * Math.PI / 180);\r\n\t\t\t//rotation\r\n\t\t\tthis.cone1.rotation.x = -1.5708;\r\n\t\t\tthis.cone1.rotation.z = (-this.n1.bearing) * Math.PI / 180;\r\n\t\t}\r\n\t\tif(this.neighbors.size===3){\r\n\t\t\tthis.n2 = this.neighbors.get(iter.next().value);\r\n\t\t\tthis.cone2.visible = true;\r\n\t\t\t//position\r\n\t\t\tthis.cone2.position.z = -Math.cos(this.n2.bearing * Math.PI / 180);\r\n\t\t\tthis.cone2.position.x = Math.sin(this.n2.bearing * Math.PI / 180);\r\n\t\t\t//rotation\r\n\t\t\tthis.cone2.rotation.x = -1.5708;\r\n\t\t\tthis.cone2.rotation.z = (-this.n2.bearing) * Math.PI / 180;\r\n\t\t}\r\n\t}\r\n\r\n\tRenderPano() {\r\n\t\tvar mainCam = useRef();\r\n\t\tvar { gl, camera, canvas, scene } = useThree();\r\n\t\tthis.threeCamera = camera;\r\n\t\tthis.threeScene = scene;\r\n\t\t(camera as any).fov = 40;\r\n\t\t//gl.setSize(window.innerWidth, window.innerHeight);\r\n\t\tgl.setSize(canvas.clientWidth, canvas.clientHeight);\r\n\t\t\r\n\t\tcamera.position.set(0, 0, 0);\r\n\t\tcamera.lookAt(0, 0, 0);\r\n\r\n\t\tlet cone = new Arrow();\r\n\t\tvar conemesh = useRef();\r\n\t\tvar conemesh1 = useRef();\r\n\t\tvar conemesh2 = useRef();\r\n\r\n\t\tthis.cone0 = conemesh.current as any;\r\n\t\tthis.cone1 = conemesh1.current as any;\r\n\t\tthis.cone2 = conemesh2.current as any;\r\n\r\n\t\t// Mouse drag rotation controls\r\n\t\tvar mouseDown = false,\r\n\t\t\tmouseX = 0,\r\n\t\t\tmouseY = 0;\r\n\r\n\t\tfunction onMouseMove(evt) {\r\n\t\t\tif (!mouseDown) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tevt.preventDefault();\r\n\t\t\tvar deltaX = evt.clientX - mouseX,\r\n\t\t\t\tdeltaY = evt.clientY - mouseY;\r\n\t\t\tmouseX = evt.clientX;\r\n\t\t\tmouseY = evt.clientY;\r\n\r\n\t\t\trotateScene(deltaX);\r\n\t\t}\r\n\r\n\t\tfunction onMouseDown(evt) {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tmouseDown = true;\r\n\t\t\tmouseX = evt.clientX;\r\n\t\t\tmouseY = evt.clientY;\r\n\t\t}\r\n\r\n\t\tfunction onMouseUp(evt) {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tmouseDown = false;\r\n\t\t}\r\n\r\n\t\t//Touch rotation control\r\n\t\tvar startX = 0;\r\n\r\n\t\tfunction onTouchStart(event) {\r\n\t\t\tstartX = (event.targetTouches[0].pageX);\r\n\t\t}\r\n\r\n\t\tfunction onTouchMove(event) {\r\n\t\t\tvar deltaX = (event.targetTouches[0].pageX - startX);\r\n\t\t\tstartX = (event.targetTouches[0].pageX);\r\n\t\t\trotateScene(deltaX);\r\n\t\t}\r\n\r\n\t\t//Mouse wheel rotation control\r\n\t\tfunction onScroll(event) {\r\n\t\t\tif(event.path[0]===canvas){\r\n\t\t\t\tvar deltaY = event.wheelDeltaY / 3;\r\n\t\t\t\trotateScene(deltaY);\r\n\t\t\t}\r\n        }\r\n        \r\n\t\tfunction rotateScene(deltaX) {\r\n\t\t\tcamera.rotation.y += deltaX / 1000;\r\n\t\t\tcamera.rotation.y %= 2 * Math.PI;\r\n\t\t}\r\n\t\t\r\n\t\tfunction onWindowResize(){\r\n\t\t\tgl.setSize( canvas.clientWidth, canvas.clientHeight );\r\n\t\t\t(camera as any).aspect = canvas.clientWidth / canvas.clientHeight;\r\n\t\t\t(camera as any).updateProjectionMatrix();\r\n\t\t}\r\n\t\tcanvas.addEventListener(\"mousemove\", e => onMouseMove(e), false);\r\n\t\tcanvas.addEventListener(\"mousedown\", e => onMouseDown(e), false);\r\n\t\tcanvas.addEventListener(\"mouseup\", e => onMouseUp(e), false);\r\n\t\tcanvas.addEventListener(\"mousewheel\", e => onScroll(e),false);\r\n\t\tcanvas.addEventListener(\"touchmove\", e => onTouchMove(e), false);\r\n\t\tcanvas.addEventListener(\"touchstart\", e => onTouchStart(e), false);\r\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\r\n\r\n\t\tvar animateTransition = id => {\r\n            //Set up parameters for TWEEN animations\r\n\t\t\tconst depth = 17;\r\n\t\t\tconst resFov = 75;\r\n\t\t\tconst camAt = (this.neighbors.get(id).bearing * Math.PI) / 180;\r\n\t\t\tvar endAt = (-this.neighbors.get(id).bearing * Math.PI) / 180;\r\n\t\t\tif (camera.rotation.y > 0) {\r\n\t\t\t\tendAt = 2 * Math.PI - (this.neighbors.get(id).bearing * Math.PI) / 180;\r\n\t\t\t}\r\n\t\t\tif(camera.rotation.y-endAt >= Math.PI && camera.rotation.y-endAt<2*Math.PI){\r\n\t\t\t\tendAt += 2 * Math.PI; \r\n\t\t\t}else if( camera.rotation.y-endAt <= -Math.PI && camera.rotation.y-endAt< -2*Math.PI){\r\n\t\t\t\tendAt = - 2 * Math.PI + endAt;\r\n\t\t\t}\r\n\t\t\tvar rotBegin = {\r\n\t\t\t\tat: (camera as any).rotation.y\r\n\t\t\t};\r\n\t\t\tvar rotEnd = {\r\n\t\t\t\tat: endAt\r\n\t\t\t};\r\n\t\t\tvar tweenRot = new TWEEN.Tween(rotBegin)\r\n\t\t\t\t.to(rotEnd, 500)\r\n\t\t\t\t.easing(TWEEN.Easing.Quadratic.InOut);\r\n\t\t\ttweenRot.onUpdate(function() {\r\n\t\t\t\t(camera as any).rotation.y = rotBegin.at;\r\n\t\t\t});\r\n\t\t\ttweenRot.onComplete(() => {\r\n\t\t\t\tcamera.rotation.y = (-this.neighbors.get(id).bearing * Math.PI) / 180;\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tvar zoom = {\r\n\t\t\t\tzVal: (camera as any).position.z,\r\n\t\t\t\txVal: (camera as any).position.x,\r\n                fovValue: (camera as any).fov,\r\n                opacity: this.cylindermaterial.opacity\r\n\t\t\t};\r\n\t\t\tvar zoomEnd = {\r\n\t\t\t\tzVal: -depth * Math.cos(camAt),\r\n\t\t\t\txVal: depth * Math.sin(camAt),\r\n                fovValue: resFov,\r\n                opacity: 0.1\r\n\t\t\t};\r\n\t\t\tvar tweenZoom = new TWEEN.Tween(zoom).to(zoomEnd, 500);\r\n\r\n\t\t\ttweenZoom.onUpdate(() => {\r\n\t\t\t\t(camera as any).position.z = zoom.zVal;\r\n\t\t\t\t(camera as any).position.x = zoom.xVal;\r\n\t\t\t\t(camera as any).fov = zoom.fovValue;\r\n                (camera as any).updateProjectionMatrix();\r\n                this.cylindermaterial.opacity = zoom.opacity;\r\n\t\t\t});\r\n\t\t\ttweenZoom.onComplete(async () => {\r\n                //reset camera zoom and pos\r\n                camera.position.set(0,0,0);\r\n\t\t\t\t(camera as any).fov = 40;\r\n                (camera as any).updateProjectionMatrix();\r\n                //When animations are completed, textures are swapped\r\n                \r\n                this.cylindermaterial.map = this.texture;\r\n                this.cylindermesh.rotation.y = this.currLoc.calibration;\r\n                this.cylindermaterial.transparent = false;\r\n                this.cylindermaterial.opacity = 1.0;\r\n\r\n                scene.remove(this.tempcylindermesh);\r\n                this.tempcylindermesh.geometry.dispose();\r\n                this.tempcylindermesh.material.dispose();\r\n                this.tempcylindermesh = undefined;\r\n                this.tempcylindergeometry.scale(-1,1,1);\r\n\t\t\t\tawait this.setNeighbors().then(this.RenderArrows);//.then(()=>{this.InitNeighborPins()});\r\n\t\t\t});\r\n            tweenRot.chain(tweenZoom);\r\n            this.cylindermaterial.transparent = true;\r\n            \r\n\t\t\ttweenRot.start();\r\n\t\t};\r\n        \r\n        scene.add(this.cylindermesh);\r\n\t\t//RenderCompass();\r\n\r\n\t\tvar transitionToScene = async (id) => {\r\n\t\t\tthis.currLoc = this.neighbors.get(id).location;\r\n\t\t\t//await this.currLoc.setAllAttr();\r\n\t\t\tthis.texture = this.loader.load(\r\n\t\t\t\trequire(`./assets/viewPano/resource/${this.currLoc.fname}`),\r\n\t\t\t\t() => {//onComplete\r\n                    this.tempcylindermaterial = new THREE.MeshBasicMaterial({\r\n                        map: this.texture,\r\n                        side: THREE.DoubleSide\r\n                    });\r\n                    this.tempcylindermesh = new THREE.Mesh(\r\n                        this.tempcylindergeometry,\r\n                        this.tempcylindermaterial\r\n                    );\r\n                    this.tempcylindergeometry.scale(-1, 1, 1);\r\n                    this.tempcylindermesh.rotation.y = this.currLoc.calibration;\r\n                    scene.add(this.tempcylindermesh);\r\n\t\t\t\t\tanimateTransition(id);\r\n\t\t\t\t\tthis.mapStore.lat = this.currLoc.coord.lat; \r\n\t\t\t\t\tthis.mapStore.lng = this.currLoc.coord.lng;\r\n\t\t\t\t\tthis.mapStore.bearing = this.currLoc.cameraY;\r\n\t\t\t\t},\r\n\t\t\t\tundefined,\r\n\t\t\t\terr => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\t\t//this.InitNeighborPins();\r\n\t\t/*\r\n\t\tfunction RenderCompass() {\r\n\t\t\tvar loader = new SVGLoader();\r\n\t\t\tloader.load(\r\n\t\t\t\trequire(`./assets/viewPano/compass.svg`),\r\n\t\t\t\tfunction(data) {\r\n\t\t\t\t\tvar paths = data.paths;\r\n\t\t\t\t\tfor (var i = 0; i < paths.length; i++) {\r\n\t\t\t\t\t\tvar path = paths[i];\r\n\t\t\t\t\t\tvar material = new THREE.MeshBasicMaterial({\r\n\t\t\t\t\t\t\tcolor: path.color,\r\n\t\t\t\t\t\t\tside: THREE.DoubleSide,\r\n\t\t\t\t\t\t\tdepthWrite: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar shapes = path.toShapes(true);\r\n\t\t\t\t\t\tfor (var j = 0; j < shapes.length; j++) {\r\n\t\t\t\t\t\t\tvar shape = shapes[j];\r\n\t\t\t\t\t\t\tvar geometry = new THREE.ShapeBufferGeometry(shape);\r\n\t\t\t\t\t\t\tvar mesh = new THREE.Mesh(geometry, material);\r\n\t\t\t\t\t\t\t(compassGroup.current as any).add(mesh);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(compassGroup);\r\n\t\t\t\t\t//(compassGroup.current as any).scale.set(13, 13, 13);\r\n\t\t\t\t\tscene.add(compassGroup.current);\r\n\t\t\t\t},\r\n\t\t\t\tundefined,\r\n\t\t\t\tfunction(error) {\r\n\t\t\t\t\tconsole.log(\"Error Loading Compass\");\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\tRenderCompass();\r\n\t\t*/\r\n\r\n\t\t\r\n        if(conemesh.current&&conemesh1.current&&conemesh2.current){\r\n\t\t\tthis.RenderArrows();\r\n        }\r\n\t\tvar coneGroup = useRef();\r\n\t\tvar compassGroup = useRef();\r\n\t\tvar triGeo = useRef();\r\n\t\tlet triGeoArr = [new THREE.Vector3(0, 1, 0), new THREE.Vector3(-0.6, -1, 0), new THREE.Vector3(0, -0.5, 0), new THREE.Vector3(0.6, -1, 0)];\r\n\t\tif (triGeo.current){\r\n\t\t\t(triGeo.current as any).vertices = triGeoArr;\r\n\t\t\t(triGeo.current as any).faces.push( new THREE.Face3( 0, 1, 2 ) );\r\n\t\t\t(triGeo.current as any).faces.push( new THREE.Face3( 0, 2, 3 ) );\r\n\t\t\t(triGeo.current as any).computeFaceNormals();\r\n\t\t\t(triGeo.current as any).scale(0.3, 0.3, 0.3);\r\n\t\t}\r\n\t\tfunction setChildrenOpacity(group, opc){\r\n\t\t\tfor(let child of group){\r\n\t\t\t\tchild.material.opacity = opc;\r\n\t\t\t}\r\n        }\r\n        \r\n        var testMesh = useRef();\r\n        if(testMesh.current){\r\n            (testMesh.current as any).geometry.scale(2,2,2);\r\n        }\r\n\t\t\r\n\t\tuseRender(() => {\r\n\t\t\tTWEEN.update();\r\n\t\t\t(coneGroup.current as any).position.set(\r\n\t\t\t\t-13 * Math.sin(camera.rotation.y),\r\n\t\t\t\t-4,\r\n\t\t\t\t-13 * Math.cos(camera.rotation.y)\r\n\t\t\t);\r\n\t\t\t(compassGroup.current as any).position.set(\r\n\t\t\t\t-13 * Math.sin(camera.rotation.y-0.4),\r\n\t\t\t\t-3,\r\n\t\t\t\t-13 * Math.cos(camera.rotation.y-0.4)\r\n\t\t\t);\r\n\t\t\t(compassGroup.current as any).rotation.y=camera.rotation.y;\r\n\t\t\t(compassGroup.current as any).rotation.z=-camera.rotation.y;\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<perspectiveCamera\r\n\t\t\t\t\tref={mainCam}\r\n\t\t\t\t\tfov={45}\r\n\t\t\t\t\taspect={window.innerWidth / window.innerHeight}\r\n\t\t\t\t\tonUpdate={self => self.updateProjectionMatrix()}\r\n\t\t\t\t/>\r\n                \r\n\t\t\t\t<group ref={coneGroup} /*group of arrows */>\r\n\t\t\t\t\t<mesh //First Arrow\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\ttransitionToScene(this.n0.location.id); /*this.currLoc.updateCalibration(camera)*/\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonPointerOver={e => {(e.object as any).material.opacity=0.7;}}\r\n\t\t\t\t\t\tonPointerOut={e => {(e.object as any).material.opacity=0.5;}}\r\n\t\t\t\t\t\tref={conemesh}\r\n\t\t\t\t\t\tgeometry={cone.geometry}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.5} transparent={true}/>\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t\t<mesh //Second Arrow\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\ttransitionToScene(this.n1.location.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonPointerOver={e => {(e.object as any).material.opacity=0.7;}}\r\n\t\t\t\t\t\tonPointerOut={e => {(e.object as any).material.opacity=0.5;}}\r\n                        ref={conemesh1}\r\n                        geometry={cone.geometry}\r\n                    >\r\n                        <meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.5} transparent={true}/>\r\n                    </mesh>\r\n\t\t\t\t\t<mesh //Third Arrow\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\ttransitionToScene(this.n2.location.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonPointerOver={e => {(e.object as any).material.opacity=0.7;}}\r\n\t\t\t\t\t\tonPointerOut={e => {(e.object as any).material.opacity=0.5;}}\r\n                        ref={conemesh2}\r\n                        geometry={cone.geometry}\r\n                    >\r\n                        <meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.5} transparent={true}/>\r\n                    </mesh>\r\n                    {/*<mesh //Test mesh\r\n                        onClick={() => fadeTexture()}\r\n\t\t\t\t\t\tonPointerOver={e => {(e.object as any).material.opacity=0.9;}}\r\n\t\t\t\t\t\tonPointerOut={e => {(e.object as any).material.opacity=0.5;}}\r\n                        ref={testMesh}\r\n                        geometry={cone.geometry}\r\n                        position={[8,0,0]}\r\n                        rotation={[1.571,0,0]}\r\n                    >\r\n                        <meshBasicMaterial attach=\"material\" color=\"blue\" opacity={0.5} transparent={true}/>\r\n                    </mesh>*/}\r\n\t\t\t\t</group>\r\n\t\t\t\t<group\r\n\t\t\t\t\tonClick={() => this.CameraLookNorth(camera)}\r\n\t\t\t\t\tonPointerOver={e => {setChildrenOpacity(e.object.children, 0.8);}}\r\n\t\t\t\t\tonPointerOut={e => {setChildrenOpacity(e.object.children, 0.5);}}\r\n\t\t\t\t\tref={compassGroup}\r\n\t\t\t\t>\r\n\t\t\t\t\t<mesh //Compass Plate \r\n\t\t\t\t\t\tposition={[0, 0, 0]}\r\n\t\t\t\t\t\tgeometry={new THREE.CircleGeometry(0.4, 100, 0)}>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.5} transparent={true} />\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t\t<mesh //Compass North Arrow \r\n\t\t\t\t\t\tposition={[0, 0.03, 0.01]}\r\n\t\t\t\t\t>\t\r\n\t\t\t\t\t\t<geometry \r\n\t\t\t\t\t\t\tattach=\"geometry\"\r\n\t\t\t\t\t\t\tref={triGeo}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"red\" opacity={0.5} transparent={true} />\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t</group>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\t//TODO: change the pano window render size\r\n\trender() {\r\n\t\tconst { isLoading } = this.state;\r\n\t\t\r\n\r\n\t\treturn isLoading ? (\r\n\t\t\t<div className={\"spinner-container\"}>\r\n\t\t\t\t<Spinner width={100} height={100} />\r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<div className=\"Pano-container\">\r\n\t\t\t\t<div className=\"Pano-canvas\">\r\n\t\t\t\t\t<Canvas>\r\n\t\t\t\t\t\t<this.RenderPano />\r\n\t\t\t\t\t</Canvas>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"Minimap\">\r\n\t\t\t\t\t<Minimap mapStore={this.mapStore} panoStore={this.panoStore}/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class PanoStore{\r\n\t@observable id:string\r\n\r\n\tconstructor(id){\r\n\t\tthis.id=id;\r\n\t}\r\n\tpublic updateId(id){\r\n\t\tthis.id=id;\r\n\t}\r\n}\r\n\r\nexport default withRouter(Pano);\r\n\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {\r\n\tHashRouter as Router,\r\n\tRoute,\r\n\tSwitch,\r\n\tNavLink,\r\n\tRedirect\r\n} from \"react-router-dom\";\r\n\r\nimport { Container, Header, Content } from \"./components/layout\";\r\nimport GMap from \"./maps\";\r\nimport Pano from \"./pano\";\r\nimport \"./style/App.css\";\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: \"/maps/boston\",\r\n\t\ttitle: \"Boston\"\r\n\t},\r\n\t{\r\n\t\tpath: \"/maps/concord\",\r\n\t\ttitle: \"Concord\"\r\n\t},\r\n\t{\r\n\t\tpath: \"/viewPano\",\r\n\t\ttitle: \"View Pano\"\r\n\t}\r\n];\r\n\r\nexport const Interface: React.FC = () => {\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<Container>\r\n\t\t\t\t<Header>\r\n\t\t\t\t\t{routes.map(r => (\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tto={r.path}\r\n\t\t\t\t\t\t\tkey={r.path}\r\n\t\t\t\t\t\t\tactiveClassName=\"ir-nav-item__active\"\r\n\t\t\t\t\t\t\tclassName=\"ir-nav-item\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{r.title}\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Header>\r\n\t\t\t\t<Content>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path=\"/maps/:region\" component={GMap} />}/>\r\n\t\t\t\t\t\t<Route exact={true} path=\"/viewPano/:id\" component={Pano} />\r\n\t\t\t\t\t\t<Route path=\"/viewPano\" component={Pano} />\r\n\t\t\t\t\t\t<Redirect exact from=\"/\" to=\"maps/concord\" />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Content>\r\n\t\t\t</Container>\r\n\t\t</Router>\r\n\t);\r\n};\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './style/index.css';\r\nimport * as App from './App';\r\n\r\nReactDOM.render(<App.Interface />, document.getElementById('interface'));\r\n\r\n","var map = {\n\t\"./pano-20190724143458-mx.png\": 118,\n\t\"./pano-20190724143833-mx.png\": 119,\n\t\"./pano-20190724145944-mx.png\": 120,\n\t\"./pano-20190724150711-mx.png\": 121,\n\t\"./pano-20190724151238-mx.png\": 122,\n\t\"./pano-20190724151553-mx.png\": 123,\n\t\"./pano-20190925110216-mx.png\": 124,\n\t\"./pano-20190925110449-mx.png\": 125,\n\t\"./pano-20190925110659-mx.png\": 126,\n\t\"./pano-20190925111017-mx.png\": 127,\n\t\"./pano-20190925111251-mx.png\": 128,\n\t\"./pano-20190925111418-mx.png\": 129,\n\t\"./pano-20190925111628-mx.png\": 130,\n\t\"./pano-20190925111907-mx.png\": 131,\n\t\"./pano-20190925112004-mx.png\": 132,\n\t\"./pano-20190925112226-mx.png\": 133,\n\t\"./pano-20190925112242-mx.png\": 134,\n\t\"./pano-20190925112410-mx.png\": 135,\n\t\"./pano-20190925112418-mx.png\": 136,\n\t\"./pano-20190925112754-mx.png\": 137,\n\t\"./pano-20190925112757-mx.png\": 138,\n\t\"./pano-20190925112929-mx.png\": 139,\n\t\"./pano-20190925112944-mx.png\": 140,\n\t\"./pano-20190925113109-mx.png\": 141,\n\t\"./pano-20190925113249-mx.png\": 142,\n\t\"./pano-20190925113346-mx.png\": 143\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 47;"],"sourceRoot":""}